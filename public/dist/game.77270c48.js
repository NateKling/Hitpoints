let e,t,n,r,i;var o,a,s,u,l,c,h,d,f,p,m,_,g,y,b,w,A=globalThis;function T(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}let E=Object.getPrototypeOf,C,x,k,R,S={isConnected:1},M,P={},L=E(S),I=E(E),O,F=(e,t,n,r)=>(e??(setTimeout(n,r),new Set)).add(t),B=(e,t,n)=>{let r=k;k=t;try{return e(n)}catch(e){return console.error(e),n}finally{k=r}},j=e=>e.filter(e=>e._dom?.isConnected),D=e=>M=F(M,e,()=>{for(let e of M)e._bindings=j(e._bindings),e._listeners=j(e._listeners);M=O},1e3),N={get val(){return k?._getters?.add(this),this.rawVal},get oldVal(){return k?._getters?.add(this),this._oldVal},set val(v){k?._setters?.add(this),v!==this.rawVal&&(this.rawVal=v,this._bindings.length+this._listeners.length?(x?.add(this),C=F(C,this,G)):this._oldVal=v)}},U=e=>({__proto__:N,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),V=(e,t)=>{let n={_getters:new Set,_setters:new Set},r={f:e},i=R;R=[];let o=B(e,n,t);for(let e of(o=(o??document).nodeType?o:new Text(o),n._getters))n._setters.has(e)||(D(e),e._bindings.push(r));for(let e of R)e._dom=o;return R=i,r._dom=o},H=(e,t=U(),n)=>{let r={_getters:new Set,_setters:new Set},i={f:e,s:t};for(let o of(i._dom=n??R?.push(i)??S,t.val=B(e,r,t.rawVal),r._getters))r._setters.has(o)||(D(o),o._listeners.push(i));return t},W=(e,...t)=>{for(let n of t.flat(1/0)){let t=E(n??0),r=t===N?V(()=>n.val):t===I?V(n):n;r!=O&&e.append(r)}return e},$=(e,t,...n)=>{let[{is:r,...i},...o]=E(n[0]??0)===L?n:[{},...n],a=e?document.createElementNS(e,t,{is:r}):document.createElement(t,{is:r});for(let[e,n]of Object.entries(i)){let r=t=>t?Object.getOwnPropertyDescriptor(t,e)??r(E(t)):O,i=t+","+e,o=P[i]??=r(E(a))?.set??0,s=e.startsWith("on")?(t,n)=>{let r=e.slice(2);a.removeEventListener(r,n),a.addEventListener(r,t)}:o?o.bind(a):a.setAttribute.bind(a,e),u=E(n??0);e.startsWith("on")||u===I&&(n=H(n),u=N),u===N?V(()=>(s(n.val,n._oldVal),a)):s(n)}return W(a,o)},q=e=>({get:(t,n)=>$.bind(O,e,n)}),Y=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),G=()=>{let e=0,t=[...C].filter(e=>e.rawVal!==e._oldVal);do for(let e of(x=new Set,new Set(t.flatMap(e=>e._listeners=j(e._listeners)))))H(e.f,e.s,e._dom),e._dom=O;while(++e<100&&(t=[...x]).length)let n=[...C].filter(e=>e.rawVal!==e._oldVal);for(let e of(C=O,new Set(n.flatMap(e=>e._bindings=j(e._bindings)))))Y(e._dom,V(e.f,e._dom)),e._dom=O;for(let e of n)e._oldVal=e.rawVal};var X={tags:new Proxy(e=>new Proxy($,q(e)),q()),hydrate:(e,t)=>Y(e,V(t,e)),add:W,state:U,derive:H},z={};z=(()=>{var e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,m,_,g,y,b,w,A,T,E,C,x,k,R,S,M,P,L,I,O,F,B,j,D,N,U,V,H,W,$,q,Y,G,X,z,J,K,Q,Z,ee=[,(e,t,n)=>{var r;n.r(t),n.d(t,{default:()=>i});let i=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){function t(){function e(e){let o=r;n=t=0,r=new Map,o.forEach(t=>{try{t(e)}catch(e){console.error(e)}}),this.ob(),i&&i.Tb()}let t=0,n=0,r=new Map,i=null,o=null;this.requestAnimationFrame=function(i){t||(t=requestAnimationFrame(e.bind(this)));let o=++n;return r.set(o,i),o},this.cancelAnimationFrame=function(e){r.delete(e),t&&0==r.size&&(cancelAnimationFrame(t),t=0)},this.Rb=function(e){o&&(document.body.remove(o),o=null),e||((o=document.createElement("div")).style.backgroundColor="black",o.style.position="fixed",o.style.right=0,o.style.top=0,o.style.color="white",o.style.padding="4px",o.innerHTML="RIVE FPS",e=function(e){o.innerHTML="RIVE FPS "+e.toFixed(1)},document.body.appendChild(o)),i=new function(){let t=0,n=0;this.Tb=function(){var r=performance.now();n?(++t,1e3<(r-=n)&&(e(1e3*t/r),t=n=0)):(n=r,t=0)}}},this.Ob=function(){o&&(document.body.remove(o),o=null),i=null},this.ob=function(){}}function n(e){console.assert(!0);let t=new Map,n=-1/0;this.push=function(r){return r=r+((1<<e)-1)>>e,t.has(r)&&clearTimeout(t.get(r)),t.set(r,setTimeout(function(){t.delete(r),0==t.length?n=-1/0:r==n&&console.assert((n=Math.max(...t.keys()))<r)},1e3)),(n=Math.max(r,n))<<e}}e.ready=new Promise((e,t)=>{f=e,p=t});let i=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){i&&i();let t=e.decodeAudio;e.decodeAudio=function(e,n){n(e=t(e))};let n=e.decodeFont;e.decodeFont=function(e,t){t(e=n(e))};let r=e.FileAssetLoader;e.ptrToAsset=t=>{let n=e.ptrToFileAsset(t);return n.isImage?e.ptrToImageAsset(t):n.isFont?e.ptrToFontAsset(t):n.isAudio?e.ptrToAudioAsset(t):n},e.CustomFileAssetLoader=r.extend("CustomFileAssetLoader",{__construct:function({loadContents:e}){this.__parent.__construct.call(this),this.Gb=e},loadContents:function(t,n){return t=e.ptrToAsset(t),this.Gb(t,n)}}),e.CDNFileAssetLoader=r.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(t){var n,r,i;let o=e.ptrToAsset(t);return""!==(t=o.cdnUuid)&&(n=o.cdnBaseUrl+"/"+t,r=e=>{o.decode(new Uint8Array(e.response))},(i=new XMLHttpRequest).responseType="arraybuffer",i.onreadystatechange=function(){4==i.readyState&&200==i.status&&r(i)},i.open("GET",n,!0),i.send(null),!0)}}),e.FallbackFileAssetLoader=r.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(e){this.kb.push(e)},loadContents:function(e,t){for(let n of this.kb)if(n.loadContents(e,t))return!0;return!1}});let o=e.computeAlignment;e.computeAlignment=function(e,t,n,r,i=1){return o.call(this,e,t,n,r,i)}};let o="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),a=new function(){function e(){if(!t){let u;var e=document.createElement("canvas"),n={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(u=e.getContext("webgl",n),r=1,!u)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(u=e.getContext("webgl2",n))r=2;else{if(!(u=e.getContext("webgl",n)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;r=1}function s(e,t,n){if(t=u.createShader(t),u.shaderSource(t,n),u.compileShader(t),0<((n=u.getShaderInfoLog(t))||"").length)throw n;u.attachShader(e,t)}if(i=Math.min((u=new Proxy(u,{get:(e,t)=>e.isContextLost()?(l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",t),l=!0),"function"==typeof e[t])?function(){}:void 0:"function"==typeof e[t]?function(...n){return e[t].apply(e,n)}:e[t],set(e,t,n){if(!e.isContextLost())return e[t]=n,!0;l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+t),l=!0)}})).getParameter(u.MAX_RENDERBUFFER_SIZE),u.getParameter(u.MAX_TEXTURE_SIZE)),s(e=u.createProgram(),u.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),s(e,u.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),u.bindAttribLocation(e,0,"vertex"),u.bindAttribLocation(e,1,"uv"),u.linkProgram(e),0<((n=u.getProgramInfoLog(e))||"").trim().length)throw n;o=u.getUniformLocation(e,"mat"),a=u.getUniformLocation(e,"translate"),u.useProgram(e),u.bindBuffer(u.ARRAY_BUFFER,u.createBuffer()),u.enableVertexAttribArray(0),u.enableVertexAttribArray(1),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,u.createBuffer()),u.uniform1i(u.getUniformLocation(e,"image"),0),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=u}return!0}let t=null,r=0,i=0,o=null,a=null,s=0,u=0,l=!1;e(),this.hc=function(){return e(),i},this.Mb=function(e){t.deleteTexture&&t.deleteTexture(e)},this.Lb=function(n){if(!e())return null;let i=t.createTexture();return i?(t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),2==r?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),i):null};let c=new n(8),h=new n(8),d=new n(10),f=new n(10);this.Qb=function(n,r,i,l,p){if(e()){var m=c.push(n),_=h.push(r);if(t.canvas){for(var g of((t.canvas.width!=m||t.canvas.height!=_)&&(t.canvas.width=m,t.canvas.height=_),t.viewport(0,_-r,n,r),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),i.sort((e,t)=>t.wb-e.wb),m=d.push(l),s!=m&&(t.bufferData(t.ARRAY_BUFFER,8*m,t.DYNAMIC_DRAW),s=m),m=0,i))t.bufferSubData(t.ARRAY_BUFFER,m,g.Ta),m+=4*g.Ta.length;for(var y of(console.assert(m==4*l),i))t.bufferSubData(t.ARRAY_BUFFER,m,y.Db),m+=4*y.Db.length;for(var b of(console.assert(m==8*l),m=f.push(p),u!=m&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*m,t.DYNAMIC_DRAW),u=m),g=0,i))t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,g,b.indices),g+=2*b.indices.length;for(let e of(console.assert(g==2*p),b=0,y=!0,m=g=0,i)){e.image.Ka!=b&&(t.bindTexture(t.TEXTURE_2D,e.image.Ja||null),b=e.image.Ka),e.mc?(t.scissor(e.Ya,_-e.Za-e.jb,e.Ac,e.jb),y=!0):y&&(t.scissor(0,_-r,n,r),y=!1),i=2/n;let s=-2/r;t.uniform4f(o,e.ha[0]*i*e.Ba,e.ha[1]*s*e.Ca,e.ha[2]*i*e.Ba,e.ha[3]*s*e.Ca),t.uniform2f(a,e.ha[4]*i*e.Ba+i*(e.Ya-e.ic*e.Ba)-1,e.ha[5]*s*e.Ca+s*(e.Za-e.jc*e.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,m),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,m+4*l),t.drawElements(t.TRIANGLES,e.indices.length,t.UNSIGNED_SHORT,g),m+=4*e.Ta.length,g+=2*e.indices.length}console.assert(m==4*l),console.assert(g==2*p)}}},this.canvas=function(){return e()&&t.canvas}},s=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){function n(e){switch(e){case p.srcOver:return"source-over";case p.screen:return"screen";case p.overlay:return"overlay";case p.darken:return"darken";case p.lighten:return"lighten";case p.colorDodge:return"color-dodge";case p.colorBurn:return"color-burn";case p.hardLight:return"hard-light";case p.softLight:return"soft-light";case p.difference:return"difference";case p.exclusion:return"exclusion";case p.multiply:return"multiply";case p.hue:return"hue";case p.saturation:return"saturation";case p.color:return"color";case p.luminosity:return"luminosity"}}function r(e){return"rgba("+((0xff0000&e)>>>16)+","+((65280&e)>>>8)+","+((255&e)>>>0)+","+((0xff000000&e)>>>24)/255+")"}function i(){for(let e of(0<C.length&&(a.Qb(E.drawWidth(),E.drawHeight(),C,x,k),C=[],k=x=0,E.reset(512,512)),T)){for(let t of e.H)t();e.H=[]}T.clear()}s&&s();var u=e.RenderPaintStyle;let l=e.RenderPath,c=e.RenderPaint,h=e.Renderer,d=e.StrokeCap,f=e.StrokeJoin,p=e.BlendMode,m=u.fill,_=u.stroke,g=e.FillRule.evenOdd,y=1;var b=e.RenderImage.extend("CanvasRenderImage",{__construct:function({la:e,xa:t}={}){this.__parent.__construct.call(this),this.Ka=y,y=y+1&0x7fffffff||1,this.la=e,this.xa=t},__destruct:function(){this.Ja&&(a.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(e){var t=this;t.xa&&t.xa(t);var n=new Image;t.Wa=URL.createObjectURL(new Blob([e],{type:"image/png"})),n.onload=function(){t.Fb=n,t.Ja=a.Lb(n),t.size(n.width,n.height),t.la&&t.la(t)},n.src=t.Wa}}),w=l.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(e,t,n,r,i,o,a){var s=this.T,u=s.addPath;e=e.T;let l=new DOMMatrix;l.a=t,l.b=n,l.c=r,l.d=i,l.e=o,l.f=a,u.call(s,e,l)},fillRule:function(e){this.Va=e},moveTo:function(e,t){this.T.moveTo(e,t)},lineTo:function(e,t){this.T.lineTo(e,t)},cubicTo:function(e,t,n,r,i,o){this.T.bezierCurveTo(e,t,n,r,i,o)},close:function(){this.T.closePath()}}),A=c.extend("CanvasRenderPaint",{color:function(e){this.Xa=r(e)},thickness:function(e){this.Ib=e},join:function(e){switch(e){case f.miter:this.Ia="miter";break;case f.round:this.Ia="round";break;case f.bevel:this.Ia="bevel"}},cap:function(e){switch(e){case d.butt:this.Ha="butt";break;case d.round:this.Ha="round";break;case d.square:this.Ha="square"}},style:function(e){this.Hb=e},blendMode:function(e){this.Eb=n(e)},clearGradient:function(){this.ja=null},linearGradient:function(e,t,n,r){this.ja={yb:e,zb:t,bb:n,cb:r,Ra:[]}},radialGradient:function(e,t,n,r){this.ja={yb:e,zb:t,bb:n,cb:r,Ra:[],ec:!0}},addStop:function(e,t){this.ja.Ra.push({color:e,stop:t})},completeGradient:function(){},draw:function(e,t,n){let i=this.Hb;var o=this.Xa,a=this.ja;if(e.globalCompositeOperation=this.Eb,null!=a){o=a.yb;var s=a.zb;let t=a.bb;var u=a.cb;let n=a.Ra;a.ec?(a=t-o,u-=s,o=e.createRadialGradient(o,s,0,o,s,Math.sqrt(a*a+u*u))):o=e.createLinearGradient(o,s,t,u);for(let e=0,t=n.length;e<t;e++)s=n[e],o.addColorStop(s.stop,r(s.color));this.Xa=o,this.ja=null}switch(i){case _:e.strokeStyle=o,e.lineWidth=this.Ib,e.lineCap=this.Ha,e.lineJoin=this.Ia,e.stroke(t);break;case m:e.fillStyle=o,e.fill(t,n)}}});let T=new Set,E=null,C=[],x=0,k=0;var R=e.CanvasRenderer=h.extend("Renderer",{__construct:function(e){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=e.getContext("2d"),this.Ua=e,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){let e=this.S.length-6;if(6>e)throw"restore() called without matching save().";this.S.splice(e),this.H.push(this.C.restore.bind(this.C))},transform:function(e,t,n,r,i,o){let a=this.S,s=a.length-6;a.splice(s,6,a[s]*e+a[s+2]*t,a[s+1]*e+a[s+3]*t,a[s]*n+a[s+2]*r,a[s+1]*n+a[s+3]*r,a[s]*i+a[s+2]*o+a[s+4],a[s+1]*i+a[s+3]*o+a[s+5]),this.H.push(this.C.transform.bind(this.C,e,t,n,r,i,o))},rotate:function(e){let t=Math.sin(e);e=Math.cos(e),this.transform(e,t,-t,e,0,0)},_drawPath:function(e,t){this.H.push(t.draw.bind(t,this.C,e.T,e.Va===g?"evenodd":"nonzero"))},_drawRiveImage:function(e,t,r){var i=e.Fb;if(i){var o=this.C,a=n(t);this.H.push(function(){o.globalCompositeOperation=a,o.globalAlpha=r,o.drawImage(i,0,0),o.globalAlpha=1})}},_getMatrix:function(e){let t=this.S,n=t.length-6;for(let r=0;6>r;++r)e[r]=t[n+r]},_drawImageMesh:function(t,r,o,s,u,l,c,h,d,f){var p=this.C.canvas.width,m=this.C.canvas.height;let _=d-c,g=f-h;c=Math.max(c,0),h=Math.max(h,0);let y=(d=Math.min(d,p))-c,b=(f=Math.min(f,m))-h;if(console.assert(y<=Math.min(_,p)),console.assert(b<=Math.min(g,m)),!(0>=y||0>=b)){d=y<_||b<g,p=f=1;var w=Math.ceil(y*f),A=Math.ceil(b*p);m=a.hc(),w>m&&(f*=m/w,w=m),A>m&&(p*=m/A,A=m),E||(E=new e.DynamicRectanizer(m)).reset(512,512),0>(m=E.addRect(w,A))&&(i(),T.add(this),console.assert(0<=(m=E.addRect(w,A))));var R=65535&m,S=m>>16;C.push({ha:this.S.slice(this.S.length-6),image:t,Ya:R,Za:S,ic:c,jc:h,Ac:w,jb:A,Ba:f,Ca:p,Ta:new Float32Array(s),Db:new Float32Array(u),indices:new Uint16Array(l),mc:d,wb:t.Ka<<1|+!!d}),x+=s.length,k+=l.length;var M=this.C,P=n(r);this.H.push(function(){M.save(),M.resetTransform(),M.globalCompositeOperation=P,M.globalAlpha=o;let e=a.canvas();e&&M.drawImage(e,R,S,w,A,c,h,y,b),M.restore()})}},_clipPath:function(e){this.H.push(this.C.clip.bind(this.C,e.T,e.Va===g?"evenodd":"nonzero"))},clear:function(){T.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(e,t){this.transform(1,0,0,1,e,t)}});e.makeRenderer=function(e){let t=new R(e),n=t.C;return new Proxy(t,{get(e,r){if("function"==typeof e[r])return function(...t){return e[r].apply(e,t)};if("function"==typeof n[r]){if(-1<o.indexOf(r))throw Error("RiveException: Method call to '"+r+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...e){t.H.push(n[r].bind(n,...e))}}return e[r]},set(e,r,i){if(r in n)return t.H.push(()=>{n[r]=i}),!0}})},e.decodeImage=function(e,t){new b({la:t}).decode(e)},e.renderFactory={makeRenderPaint:function(){return new A},makeRenderPath:function(){return new w},makeRenderImage:function(){let e=M;return new b({xa:()=>{e.total++},la:()=>{if(e.loaded++,e.loaded===e.total){let t=e.ready;t&&(t(),e.ready=null)}}})}};let S=e.load,M=null;e.load=function(t,n,r=!0){let i=new e.FallbackFileAssetLoader;return void 0!==n&&i.addLoader(n),r&&(n=new e.CDNFileAssetLoader,i.addLoader(n)),new Promise(function(e){let n=null;M={total:0,loaded:0,ready:function(){e(n)}},n=S(t,i),0==M.total&&e(n)})};let P=e.RendererWrapper.prototype.align;e.RendererWrapper.prototype.align=function(e,t,n,r,i=1){P.call(this,e,t,n,r,i)},e.requestAnimationFrame=(u=new t).requestAnimationFrame.bind(u),e.cancelAnimationFrame=u.cancelAnimationFrame.bind(u),e.enableFPSCounter=u.Rb.bind(u),e.disableFPSCounter=u.Ob,u.ob=i,e.resolveAnimationFrame=i,e.cleanup=function(){E&&E.delete()}};var u,l,c,h,d,f,p,m,_,g=Object.assign({},e),y="./this.program",b="object"==typeof window,w="function"==typeof importScripts,A="";(b||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),r&&(A=r),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w&&(_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),m=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var T=e.print||console.log.bind(console),E=e.printErr||console.error.bind(console);Object.assign(e,g),g=null,e.thisProgram&&(y=e.thisProgram),e.wasmBinary&&(C=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&q("no native wasm support detected");var C,x,k,R,S,M,P,L,I,O,F,B=!1;function j(){var t=x.buffer;e.HEAP8=R=new Int8Array(t),e.HEAP16=M=new Int16Array(t),e.HEAP32=L=new Int32Array(t),e.HEAPU8=S=new Uint8Array(t),e.HEAPU16=P=new Uint16Array(t),e.HEAPU32=I=new Uint32Array(t),e.HEAPF32=O=new Float32Array(t),e.HEAPF64=F=new Float64Array(t)}var D,N=[],U=[],V=[],H=0,W=null,$=null;function q(t){throw e.onAbort&&e.onAbort(t),E(t="Aborted("+t+")"),B=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),p(t),t}function Y(e){return e.startsWith("data:application/octet-stream;base64,")}if(!Y(J="canvas_advanced.wasm")){var G=J;J=e.locateFile?e.locateFile(G,A):A+G}function X(e){if(e==J&&C)return new Uint8Array(C);if(_)return _(e);throw"both async and sync fetching of the wasm failed"}function z(e,t,n){return(function(e){if(!C&&(b||w)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>X(e));if(m)return new Promise((t,n)=>{m(e,e=>t(new Uint8Array(e)),n)})}return Promise.resolve().then(()=>X(e))})(e).then(e=>WebAssembly.instantiate(e,t)).then(e=>e).then(n,e=>{E("failed to asynchronously prepare wasm: "+e),q(e)})}var J,K,Q,Z={449484:(e,t,n,r,i)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=r,window.h.ga.xb=i;let o=window.h;o.D=[],o.yc=function(e){for(var t=0;t<o.D.length;++t)if(null==o.D[t])return o.D[t]=e,t;return o.D.push(e),o.D.length-1},o.Cb=function(e){for(o.D[e]=null;0<o.D.length;)if(null==o.D[o.D.length-1])o.D.pop();else break},o.Sc=function(e){for(var t=0;t<o.D.length;++t)if(o.D[t]==e)return o.Cb(t)},o.ra=function(e){return o.D[e]},o.Bb=["touchend","click"],o.unlock=function(){for(var e=0;e<o.D.length;++e){var t=o.D[e];null!=t&&null!=t.J&&t.state===o.ga.xb&&t.J.resume().then(()=>{nh(t.pb)},e=>{console.error("Failed to resume audiocontext",e)})}o.Bb.map(function(e){document.removeEventListener(e,o.unlock,!0)})},o.Bb.map(function(e){document.addEventListener(e,o.unlock,!0)})}return window.h.Aa+=1,1},451662:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},451826:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,451930:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch(e){return 0}},452101:(e,t,n,r,i,o)=>{if(void 0===window.h)return -1;var a={},s={};return e==window.h.I.ya&&0!=n&&(s.sampleRate=n),a.J=new(window.AudioContext||window.webkitAudioContext)(s),a.J.suspend(),a.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),a.Z=a.J.createScriptProcessor(r,n,t),a.Z.onaudioprocess=function(n){if((null==a.sa||0==a.sa.length)&&(a.sa=new Float32Array(O.buffer,i,r*t)),e==window.h.I.capture||e==window.h.I.La){for(var s=0;s<t;s+=1)for(var u=n.inputBuffer.getChannelData(s),l=a.sa,c=0;c<r;c+=1)l[c*t+s]=u[c];nd(o,r,i)}if(e==window.h.I.ya||e==window.h.I.La)for(nf(o,r,i),s=0;s<n.outputBuffer.numberOfChannels;++s)for(u=n.outputBuffer.getChannelData(s),l=a.sa,c=0;c<r;c+=1)u[c]=l[c*t+s];else for(s=0;s<n.outputBuffer.numberOfChannels;++s)n.outputBuffer.getChannelData(s).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(e){a.Da=a.J.createMediaStreamSource(e),a.Da.connect(a.Z),a.Z.connect(a.J.destination)}).catch(function(e){console.log("Failed to get user media: "+e)}),e==window.h.I.ya&&a.Z.connect(a.J.destination),a.pb=o,window.h.yc(a)},454978:e=>window.h.ra(e).J.sampleRate,455051:e=>{void 0!==(e=window.h.ra(e)).Z&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),void 0!==e.Da&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},455451:e=>{window.h.Cb(e)},455501:e=>{(e=window.h.ra(e)).J.resume(),e.state=window.h.ga.xb},455640:e=>{(e=window.h.ra(e)).J.suspend(),e.state=window.h.ga.stopped}},ee=t=>{for(;0<t.length;)t.shift()(e)},et=(e,t)=>{for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},en=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=et(e.split("/").filter(e=>!!e),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},er=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return(e=t[0],t=t[1],e||t)?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ei=e=>{if("/"===e)return"/";var t=(e=(e=en(e)).replace(/\/$/,"")).lastIndexOf("/");return -1===t?e:e.substr(t+1)},eo=()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);q("initRandomDevice")},ea=e=>(ea=eo())(e);function es(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/","string"!=typeof t)throw TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return e=et(e.split("/").filter(e=>!!e),!t).join("/"),(t?"/":"")+e||"."}var eu="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,el=(e,t,n)=>{var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&eu)return eu.decode(e.subarray(t,n));for(r="";t<n;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r},ec=[],eh=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t},ed=(e,t,n,r)=>{if(!(0<r))return 0;var i=n;r=n+r-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),127>=a){if(n>=r)break;t[n++]=a}else{if(2047>=a){if(n+1>=r)break;t[n++]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;t[n++]=224|a>>12}else{if(n+3>=r)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63}t[n++]=128|a>>6&63}t[n++]=128|63&a}}return t[n]=0,n-i};function ef(e,t){var n=Array(eh(e)+1);return e=ed(e,n,0,n.length),t&&(n.length=e),n}var ep=[];function em(e,t){ep[e]={input:[],F:[],V:t},eW(e,e_)}var e_={open:function(e){var t=ep[e.node.za];if(!t)throw new eS(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,r){if(!e.s||!e.s.V.ib)throw new eS(60);for(var i=0,o=0;o<r;o++){try{var a=e.s.V.ib(e.s)}catch(e){throw new eS(29)}if(void 0===a&&0===i)throw new eS(6);if(null==a)break;i++,t[n+o]=a}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,r){if(!e.s||!e.s.V.Oa)throw new eS(60);try{for(var i=0;i<r;i++)e.s.V.Oa(e.s,t[n+i])}catch(e){throw new eS(29)}return r&&(e.node.timestamp=Date.now()),i}};function ev(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var eg,ey,eb,ew,eA={O:null,U:()=>eA.createNode(null,"/",16895,0),createNode(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new eS(63);return eA.O||(eA.O={dir:{node:{Y:eA.l.Y,P:eA.l.P,ka:eA.l.ka,va:eA.l.va,ub:eA.l.ub,Ab:eA.l.Ab,vb:eA.l.vb,sb:eA.l.sb,Ea:eA.l.Ea},stream:{ba:eA.m.ba}},file:{node:{Y:eA.l.Y,P:eA.l.P},stream:{ba:eA.m.ba,read:eA.m.read,write:eA.m.write,pa:eA.m.pa,lb:eA.m.lb,nb:eA.m.nb}},link:{node:{Y:eA.l.Y,P:eA.l.P,ma:eA.l.ma},stream:{}},$a:{node:{Y:eA.l.Y,P:eA.l.P},stream:eH}}),16384==(61440&(n=eF(e,t,n,r)).mode)?(n.l=eA.O.dir.node,n.m=eA.O.dir.stream,n.j={}):32768==(61440&n.mode)?(n.l=eA.O.file.node,n.m=eA.O.file.stream,n.v=0,n.j=null):40960==(61440&n.mode)?(n.l=eA.O.link.node,n.m=eA.O.link.stream):8192==(61440&n.mode)&&(n.l=eA.O.$a.node,n.m=eA.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc:e=>e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0),l:{Y(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.v:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.v!=t))if(0==t)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw eM[44]},va:(e,t,n,r)=>eA.createNode(e,t,n,r),ub(e,t,n){if(16384==(61440&e.mode)){try{var r=eO(t,n)}catch(e){}if(r)for(var i in r.j)throw new eS(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n,r=eO(e,t);for(n in r.j)throw new eS(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t,n=[".",".."];for(t in e.j)e.j.hasOwnProperty(t)&&n.push(t);return n},Ea:(e,t,n)=>((e=eA.createNode(e,t,41471,0)).link=n,e),ma(e){if(40960!=(61440&e.mode))throw new eS(28);return e.link}},m:{read(e,t,n,r,i){var o=e.node.j;if(i>=e.node.v)return 0;if(8<(e=Math.min(e.node.v-i,r))&&o.subarray)t.set(o.subarray(i,i+e),n);else for(r=0;r<e;r++)t[n+r]=o[i+r];return e},write(e,t,n,r,i,o){if(t.buffer===R.buffer&&(o=!1),!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(o)return e.j=t.subarray(n,n+r),e.v=r;if(0===e.v&&0===i)return e.j=t.slice(n,n+r),e.v=r;if(i+r<=e.v)return e.j.set(t.subarray(n,n+r),i),r}if(ev(e,i+r),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+r),i);else for(o=0;o<r;o++)e.j[i+o]=t[n+o];return e.v=Math.max(e.v,i+r),r},ba(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.v),0>t)throw new eS(28);return t},pa(e,t,n){ev(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,r,i){if(32768!=(61440&e.node.mode))throw new eS(43);if(e=e.node.j,2&i||e.buffer!==R.buffer)throw(0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,q(),t=void 0,new eS(48);return n=!1,t=e.byteOffset,{o:t,M:n}},nb:(e,t,n,r)=>(eA.m.write(e,t,0,r,n,!1),0)}},eT=null,eE={},eC=[],ex=1,ek=null,eR=!0,eS=null,eM={},eP=(e,t={})=>{if(!(e=es(e)))return{path:"",node:null};if(8<(t=Object.assign({gb:!0,Qa:0},t)).Qa)throw new eS(32);e=e.split("/").filter(e=>!!e);for(var n=eT,r="/",i=0;i<e.length;i++){var o=i===e.length-1;if(o&&t.parent)break;if(n=eO(n,e[i]),r=en(r+"/"+e[i]),n.wa&&(!o||o&&t.gb)&&(n=n.wa.root),!o||t.fb){for(o=0;40960==(61440&n.mode);)if(n=eX(r),n=eP(r=es(er(r),n),{Qa:t.Qa+1}).node,40<o++)throw new eS(32)}}return{path:r,node:n}},eL=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},eI=(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ek.length},eO=(e,t)=>{var n;if(n=(n=ej(e,"x"))?n:2*!e.l.ka)throw new eS(n,e);for(n=ek[eI(e.id,t)];n;n=n.lc){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.l.ka(e,t)},eF=(e,t,n,r)=>(t=eI((e=new no(e,t,n,r)).parent.id,e.name),e.lc=ek[t],ek[t]=e),eB=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},ej=(e,t)=>eR?0:t.includes("r")&&!(292&e.mode)||t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0,eD=(e,t)=>{try{return eO(e,t),20}catch(e){}return ej(e,"wx")},eN=()=>{for(var e=0;4096>=e;e++)if(!eC[e])return e;throw new eS(33)},eU=e=>{if(!(e=eC[e]))throw new eS(8);return e},eV=(e,t=-1)=>(eb||((eb=function(){this.h={}}).prototype={},Object.defineProperties(eb.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.h.flags},set(e){this.h.flags=e}},position:{get(){return this.h.position},set(e){this.h.position=e}}})),e=Object.assign(new eb,e),-1==t&&(t=eN()),e.X=t,eC[t]=e),eH={open:e=>{e.m=eE[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new eS(70)}},eW=(e,t)=>{eE[e]={m:t}},e$=(e,t)=>{var n="/"===t,r=!t;if(n&&eT)throw new eS(10);if(!n&&!r){var i=eP(t,{gb:!1});if(t=i.path,(i=i.node).wa)throw new eS(10);if(16384!=(61440&i.mode))throw new eS(54)}t={type:e,Qc:{},mb:t,kc:[]},(e=e.U(t)).U=t,t.root=e,n?eT=e:i&&(i.wa=t,i.U&&i.U.kc.push(t))},eq=(e,t,n)=>{var r=eP(e,{parent:!0}).node;if(!(e=ei(e))||"."===e||".."===e)throw new eS(28);var i=eD(r,e);if(i)throw new eS(i);if(!r.l.va)throw new eS(63);return r.l.va(r,e,t,n)},eY=(e,t,n)=>{void 0===n&&(n=t,t=438),eq(e,8192|t,n)},eG=(e,t)=>{if(!es(e))throw new eS(44);var n=eP(t,{parent:!0}).node;if(!n)throw new eS(44);var r=eD(n,t=ei(t));if(r)throw new eS(r);if(!n.l.Ea)throw new eS(63);n.l.Ea(n,t,e)},eX=e=>{if(!(e=eP(e).node))throw new eS(44);if(!e.l.ma)throw new eS(28);return es(eL(e.parent),e.l.ma(e))},ez=(t,n,r)=>{if(""===t)throw new eS(44);if("string"==typeof n){var i={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[n];if(void 0===i)throw Error(`Unknown file open mode: ${n}`);n=i}if(r=64&n?(void 0===r?438:r)&4095|32768:0,"object"==typeof t)var o=t;else{t=en(t);try{o=eP(t,{fb:!(131072&n)}).node}catch(e){}}if(i=!1,64&n)if(o){if(128&n)throw new eS(20)}else o=eq(t,r,0),i=!0;if(!o)throw new eS(44);if(8192==(61440&o.mode)&&(n&=-513),65536&n&&16384!=(61440&o.mode))throw new eS(54);if(!i&&(r=o?40960==(61440&o.mode)?32:16384==(61440&o.mode)&&("r"!==eB(n)||512&n)?31:ej(o,eB(n)):44))throw new eS(r);if(512&n&&!i){if(!(r="string"==typeof(r=o)?eP(r,{fb:!0}).node:r).l.P)throw new eS(63);if(16384==(61440&r.mode))throw new eS(31);if(32768!=(61440&r.mode))throw new eS(28);if(i=ej(r,"w"))throw new eS(i);r.l.P(r,{size:0,timestamp:Date.now()})}return n&=-131713,(o=eV({node:o,path:eL(o),flags:n,seekable:!0,position:0,m:o.m,zc:[],error:!1})).m.open&&o.m.open(o),!e.logReadFiles||1&n||(ew||(ew={}),t in ew||(ew[t]=1)),o},eJ=(e,t,n)=>{if(null===e.X)throw new eS(8);if(!e.seekable||!e.m.ba)throw new eS(70);if(0!=n&&1!=n&&2!=n)throw new eS(28);e.position=e.m.ba(e,t,n),e.zc=[]},eK=()=>{eS||((eS=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(e){this.aa=e},this.pc(e),this.message="FS error"}).prototype=Error(),eS.prototype.constructor=eS,[44].forEach(e=>{eM[e]=new eS(e),eM[e].stack="<generic error, no stack>"}))},eQ=(e,t,n)=>{e=en("/dev/"+e);var r,i=(r=0,t&&(r|=365),n&&(r|=146),r);ey||(ey=64);var o=ey++<<8|0;eW(o,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,n,r,i)=>{for(var o=0,a=0;a<i;a++){try{var s=t()}catch(e){throw new eS(29)}if(void 0===s&&0===o)throw new eS(6);if(null==s)break;o++,n[r+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,r,i)=>{for(var o=0;o<i;o++)try{n(t[r+o])}catch(e){throw new eS(29)}return i&&(e.node.timestamp=Date.now()),o}}),eY(e,i,o)},eZ={},e0=void 0;function e1(){return L[(e0+=4)-4>>2]}function e2(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function e4(e,t){return({[e=e2(e)]:function(){return t.apply(this,arguments)}})[e]}function e3(){this.M=[void 0],this.hb=[]}var e5=new e3,e6=void 0;function e8(e){throw new e6(e)}var e9=e=>(e||e8("Cannot use deleted val. handle = "+e),e5.get(e).value),e7=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return e5.pa({tb:1,value:e})}};function te(e){var t=Error,n=e4(e,function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},n}var tt=void 0,tn=void 0;function tr(e){for(var t="";S[e];)t+=tn[S[e++]];return t}var ti=[];function to(){for(;ti.length;){var e=ti.pop();e.g.fa=!1,e.delete()}}var ta=void 0,ts={};function tu(e,t){for(void 0===t&&e8("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var tl={};function tc(e){var t=tr(e=nm(e));return nl(e),t}function th(e,t){var n=tl[e];return void 0===n&&e8(t+" has unknown type "+tc(e)),n}function td(){}var tf=!1;function tp(e){--e.count.value,0===e.count.value&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}var tm={},t_=void 0;function tv(e){throw new t_(e)}function tg(e,t){return t.u&&t.o||tv("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&tv("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ty(Object.create(e,{g:{value:t}}))}function ty(e){return"undefined"==typeof FinalizationRegistry?(ty=e=>e,e):(tf=new FinalizationRegistry(e=>{tp(e.g)}),ty=e=>{var t=e.g;return t.G&&tf.register(e,{g:t},e),e},td=e=>{tf.unregister(e)},ty(e))}var tb={};function tw(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function tA(e){return this.fromWireType(L[e>>2])}var tT={},tE={};function tC(e,t,n){function r(t){(t=n(t)).length!==e.length&&tv("Mismatched type converter count");for(var r=0;r<e.length;++r)tk(e[r],t[r])}e.forEach(function(e){tE[e]=t});var i=Array(t.length),o=[],a=0;t.forEach((e,t)=>{tl.hasOwnProperty(e)?i[t]=tl[e]:(o.push(e),tT.hasOwnProperty(e)||(tT[e]=[]),tT[e].push(()=>{i[t]=tl[e],++a===o.length&&r(i)}))}),0===o.length&&r(i)}function tx(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw TypeError(`Unknown type size: ${e}`)}}function tk(e,t,n={}){if(!("argPackAdvance"in t))throw TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,n={}){var r=t.name;if(e||e8(`type "${r}" must have a positive integer typeid pointer`),tl.hasOwnProperty(e)){if(n.$b)return;e8(`Cannot register type '${r}' twice`)}tl[e]=t,delete tE[e],tT.hasOwnProperty(e)&&(t=tT[e],delete tT[e],t.forEach(e=>e()))}(e,t,n)}function tR(e){e8(e.g.u.i.name+" instance already deleted")}function tS(){}function tM(e,t,n){if(void 0===e[t].B){var r=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||e8(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[r.ea]=r}}function tP(t,n,r){e.hasOwnProperty(t)?((void 0===r||void 0!==e[t].B&&void 0!==e[t].B[r])&&e8(`Cannot register public name '${t}' twice`),tM(e,t,t),e.hasOwnProperty(r)&&e8(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),e[t].B[r]=n):(e[t]=n,void 0!==r&&(e[t].Pc=r))}function tL(e,t,n,r,i,o,a,s){this.name=e,this.constructor=t,this.N=n,this.W=r,this.A=i,this.Ub=o,this.na=a,this.Pb=s,this.qb=[]}function tI(e,t,n){for(;t!==n;)t.na||e8(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function tO(e,t){return null===t?(this.Na&&e8(`null is not a valid ${this.name}`),0):(t.g||e8(`Cannot pass "${tz(t)}" as a ${this.name}`),t.g.o||e8(`Cannot pass deleted object as a pointer of type ${this.name}`),tI(t.g.o,t.g.u.i,this.i))}function tF(e,t){if(null===t){if(this.Na&&e8(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return null!==e&&e.push(this.W,n),n}return 0}if(t.g||e8(`Cannot pass "${tz(t)}" as a ${this.name}`),t.g.o||e8(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&e8(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=tI(t.g.o,t.g.u.i,this.i),this.ua)switch(void 0===t.g.G&&e8("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:e8(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var r=t.clone();n=this.oc(n,e7(function(){r.delete()})),null!==e&&e.push(this.W,n)}break;default:e8("Unsupporting sharing policy")}return n}function tB(e,t){return null===t?(this.Na&&e8(`null is not a valid ${this.name}`),0):(t.g||e8(`Cannot pass "${tz(t)}" as a ${this.name}`),t.g.o||e8(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&e8(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),tI(t.g.o,t.g.u.i,this.i))}function tj(e,t,n,r){this.name=e,this.i=t,this.Na=n,this.ta=r,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==t.A?this.toWireType=tF:(this.toWireType=r?tO:tB,this.K=null)}function tD(t,n,r){e.hasOwnProperty(t)||tv("Replacing nonexistant public symbol"),void 0!==e[t].B&&void 0!==r?e[t].B[r]=n:(e[t]=n,e[t].ea=r)}var tN=[],tU=e=>{var t=tN[e];return t||(e>=tN.length&&(tN.length=e+1),tN[e]=t=D.get(e)),t},tV=(t,n)=>{var r=[];return function(){if(r.length=0,Object.assign(r,arguments),t.includes("j")){var i=e["dynCall_"+t];i=r&&r.length?i.apply(null,[n].concat(r)):i.call(null,n)}else i=tU(n).apply(null,r);return i}};function tH(e,t){var n=(e=tr(e)).includes("j")?tV(e,t):tU(t);return"function"!=typeof n&&e8(`unknown function pointer with signature ${e}: ${t}`),n}var tW=void 0;function t$(e,t){var n=[],r={};throw t.forEach(function e(t){r[t]||tl[t]||(tE[t]?tE[t].forEach(e):(n.push(t),r[t]=!0))}),new tW(`${e}: `+n.map(tc).join([", "]))}function tq(e,t,n,r,i){var o=t.length;2>o&&e8("argTypes array size mismatch! Must at least get return value and 'this' types!");var a=null!==t[1]&&null!==n,s=!1;for(n=1;n<t.length;++n)if(null!==t[n]&&void 0===t[n].K){s=!0;break}var u="void"!==t[0].name,l=o-2,c=Array(l),h=[],d=[];return function(){if(arguments.length!==l&&e8(`function ${e} called with ${arguments.length} arguments, expected ${l} args!`),d.length=0,h.length=a?2:1,h[0]=i,a){var n=t[1].toWireType(d,this);h[1]=n}for(var o=0;o<l;++o)c[o]=t[o+2].toWireType(d,arguments[o]),h.push(c[o]);if(o=r.apply(null,h),s)tw(d);else for(var f=a?1:2;f<t.length;f++){var p=1===f?n:c[f-2];null!==t[f].K&&t[f].K(p)}return u?t[0].fromWireType(o):void 0}}function tY(e,t){for(var n=[],r=0;r<e;r++)n.push(I[t+4*r>>2]);return n}function tG(e,t,n){return e instanceof Object||e8(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||e8(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||e8(`cannot call emscripten binding method ${n} on deleted object`),tI(e.g.o,e.g.u.i,t.i)}function tX(e){e>=e5.h&&0==--e5.get(e).tb&&e5.Zb(e)}function tz(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}var tJ="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,tK=(e,t)=>{for(var n=e>>1,r=n+t/2;!(n>=r)&&P[n];)++n;if(32<(n<<=1)-e&&tJ)return tJ.decode(S.subarray(e,n));for(r=0,n="";!(r>=t/2);++r){var i=M[e+2*r>>1];if(0==i)break;n+=String.fromCharCode(i)}return n},tQ=(e,t,n)=>{if(void 0===n&&(n=0x7fffffff),2>n)return 0;n-=2;var r=t;n=n<2*e.length?n/2:e.length;for(var i=0;i<n;++i)M[t>>1]=e.charCodeAt(i),t+=2;return M[t>>1]=0,t-r},tZ=e=>2*e.length,t0=(e,t)=>{for(var n=0,r="";!(n>=t/4);){var i=L[e+4*n>>2];if(0==i)break;++n,65536<=i?(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i)):r+=String.fromCharCode(i)}return r},t1=(e,t,n)=>{if(void 0===n&&(n=0x7fffffff),4>n)return 0;var r=t;n=r+n-4;for(var i=0;i<e.length;++i){var o=e.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),L[t>>2]=o,(t+=4)+4>n)break}return L[t>>2]=0,t-r},t2=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t},t4={};function t3(e){var t=t4[e];return void 0===t?tr(e):t}var t5,t6=[],t8=[],t9=[],t7={},ne=()=>{if(!t5){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in t7)void 0===t7[e]?delete t[e]:t[e]=t7[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);t5=n}return t5},nt=e=>0==e%4&&(0!=e%100||0==e%400),nn=[31,29,31,30,31,30,31,31,30,31,30,31],nr=[31,28,31,30,31,30,31,31,30,31,30,31],ni=(e,t,n,r)=>{function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return i(e,t,"0")}function a(e,t){var n;function r(e){return 0>e?-1:+(0<e)}return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.ca;for(e=new Date(new Date(e.da+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(nt(e.getFullYear())?nn:nr)[n];if(t>r-e.getDate())t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));else{e.setDate(e.getDate()+t);break}}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=a(t,e)?0>=a(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=L[r+40>>2];for(var c in r={wc:L[r>>2],vc:L[r+4>>2],Fa:L[r+8>>2],Sa:L[r+12>>2],Ga:L[r+16>>2],da:L[r+20>>2],R:L[r+24>>2],ca:L[r+28>>2],Rc:L[r+32>>2],uc:L[r+36>>2],xc:l&&l?el(S,l):""},n=n?el(S,n):"",l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(RegExp(c,"g"),l[c]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(c in l={"%a":e=>h[e.R].substring(0,3),"%A":e=>h[e.R],"%b":e=>d[e.Ga].substring(0,3),"%B":e=>d[e.Ga],"%C":e=>o((e.da+1900)/100|0,2),"%d":e=>o(e.Sa,2),"%e":e=>i(e.Sa,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.Fa,2),"%I":e=>(0==(e=e.Fa)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Ga-1;t+=(nt(e.da+1900)?nn:nr)[n++]);return o(e.Sa+t,3)},"%m":e=>o(e.Ga+1,2),"%M":e=>o(e.vc,2),"%n":()=>"\n","%p":e=>0<=e.Fa&&12>e.Fa?"AM":"PM","%S":e=>o(e.wc,2),"%t":()=>"	","%u":e=>e.R||7,"%U":e=>o(Math.floor((e.ca+7-e.R)/7),2),"%V":e=>{var t=Math.floor((e.ca+7-(e.R+6)%7)/7);if(2>=(e.R+371-e.ca-2)%7&&t++,t)53==t&&(4==(n=(e.R+371-e.ca)%7)||3==n&&nt(e.da)||(t=1));else{t=52;var n=(e.R+7-e.ca-1)%7;(4==n||5==n&&nt(e.da%400-1))&&t++}return o(t,2)},"%w":e=>e.R,"%W":e=>o(Math.floor((e.ca+7-(e.R+6)%7)/7),2),"%y":e=>(e.da+1900).toString().substring(2),"%Y":e=>e.da+1900,"%z":e=>{var t=0<=(e=e.uc);return(t?"+":"-")+String("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4)},"%Z":e=>e.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),l)n.includes(c)&&(n=n.replace(RegExp(c,"g"),l[c](r)));return(c=ef(n=n.replace(/\0\0/g,"%"),!1)).length>t?0:(R.set(c,e),c.length-1)};function no(e,t,n,r){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=ex++,this.name=t,this.mode=n,this.l={},this.m={},this.za=r}Object.defineProperties(no.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),eK(),ek=Array(4096),e$(eA,"/"),eq("/tmp",16895,0),eq("/home",16895,0),eq("/home/web_user",16895,0),eq("/dev",16895,0),eW(259,{read:()=>0,write:(e,t,n,r)=>r}),eY("/dev/null",259),em(1280,{ib:function(){e:{if(!ec.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){e=null;break e}ec=ef(e,!0)}e=ec.shift()}return e},Oa:function(e,t){null===t||10===t?(T(el(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(T(el(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}}),em(1536,{Oa:function(e,t){null===t||10===t?(E(el(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(E(el(e.F,0)),e.F=[])}}),eY("/dev/tty",1280),eY("/dev/tty1",1536),u=new Uint8Array(1024),l=0,eQ("random",c=()=>(0===l&&(l=ea(u).byteLength),u[--l])),eQ("urandom",c),eq("/dev/shm",16895,0),eq("/dev/shm/tmp",16895,0),eq("/proc",16895,0),h=eq("/proc/self",16895,0),eq("/proc/self/fd",16895,0),e$({U:()=>{var e=eF(h,"fd",16895,73);return e.l={ka:(e,t)=>{var n=eU(+t);return(e={parent:null,U:{mb:"fake"},l:{ma:()=>n.path}}).parent=e}},e}},"/proc/self/fd"),Object.assign(e3.prototype,{get(e){return this.M[e]},has(e){return void 0!==this.M[e]},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),e6=e.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},e5.M.push({value:void 0},{value:null},{value:!0},{value:!1}),e5.h=e5.M.length,e.count_emval_handles=function(){for(var e=0,t=e5.h;t<e5.M.length;++t)void 0!==e5.M[t]&&++e;return e},tt=e.PureVirtualError=te("PureVirtualError");for(var na=Array(256),ns=0;256>ns;++ns)na[ns]=String.fromCharCode(ns);tn=na,e.getInheritedInstanceCount=function(){return Object.keys(ts).length},e.getLiveInheritedInstances=function(){var e,t=[];for(e in ts)ts.hasOwnProperty(e)&&t.push(ts[e]);return t},e.flushPendingDeletes=to,e.setDelayFunction=function(e){ta=e,ti.length&&ta&&ta(to)},t_=e.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},tS.prototype.isAliasOf=function(e){if(!(this instanceof tS&&e instanceof tS))return!1;var t=this.g.u.i,n=this.g.o,r=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;r.A;)e=r.na(e),r=r.A;return t===r&&n===e},tS.prototype.clone=function(){if(this.g.o||tR(this),this.g.ia)return this.g.count.value+=1,this;var e=ty,t=Object,n=t.create,r=Object.getPrototypeOf(this),i=this.g;return e=e(n.call(t,r,{g:{value:{count:i.count,fa:i.fa,ia:i.ia,o:i.o,u:i.u,G:i.G,L:i.L}}})),e.g.count.value+=1,e.g.fa=!1,e},tS.prototype.delete=function(){this.g.o||tR(this),this.g.fa&&!this.g.ia&&e8("Object already scheduled for deletion"),td(this),tp(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},tS.prototype.isDeleted=function(){return!this.g.o},tS.prototype.deleteLater=function(){return this.g.o||tR(this),this.g.fa&&!this.g.ia&&e8("Object already scheduled for deletion"),ti.push(this),1===ti.length&&ta&&ta(to),this.g.fa=!0,this},tj.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},tj.prototype.ab=function(e){this.W&&this.W(e)},tj.prototype.argPackAdvance=8,tj.prototype.readValueFromPointer=tA,tj.prototype.deleteObject=function(e){null!==e&&e.delete()},tj.prototype.fromWireType=function(e){function t(){return this.ua?tg(this.i.N,{u:this.nc,o:r,L:this,G:e}):tg(this.i.N,{u:this,o:e})}var n,r=this.Vb(e);if(!r)return this.ab(e),null;var i=ts[tu(this.i,r)];if(void 0!==i)return 0===i.g.count.value?(i.g.o=r,i.g.G=e,i.clone()):(i=i.clone(),this.ab(e),i);if(!(i=tm[i=this.i.Ub(r)]))return t.call(this);i=this.ta?i.Kb:i.pointerType;var o=function e(t,n,r){return n===r?t:void 0===r.A||null===(t=e(t,n,r.A))?null:r.Pb(t)}(r,this.i,i.i);return null===o?t.call(this):this.ua?tg(i.i.N,{u:i,o:o,L:this,G:e}):tg(i.i.N,{u:i,o:o})},tW=e.UnboundTypeError=te("UnboundTypeError");var nu={__syscall_fcntl64:function(e,t,n){e0=n;try{var r=eU(e);switch(t){case 0:var i=e1();return 0>i?-28:eV(r,i).X;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:return i=e1(),r.flags|=i,0;case 5:return M[(i=e1())+0>>1]=2,0;case 16:case 8:default:return -28;case 9:return L[np()>>2]=28,-1}}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_ioctl:function(e,t,n){e0=n;try{var r=eU(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.s?0:-59;case 21505:if(!r.s)return -59;if(r.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=e1();L[i>>2]=25856,L[i+4>>2]=5,L[i+8>>2]=191,L[i+12>>2]=35387;for(var o=0;32>o;o++)R[i+o+17>>0]=t[o]||0}return 0;case 21506:case 21507:case 21508:if(!r.s)return -59;if(r.s.V.cc)for(i=e1(),t=[],o=0;32>o;o++)t.push(R[i+o+17>>0]);return 0;case 21519:if(!r.s)return -59;return L[(i=e1())>>2]=0;case 21520:return r.s?-28:-59;case 21531:if(i=e1(),!r.m.ac)throw new eS(59);return r.m.ac(r,t,i);case 21523:if(!r.s)return -59;return r.s.V.dc&&(o=[24,80],M[(i=e1())>>1]=o[0],M[i+2>>1]=o[1]),0;default:return -28}}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_openat:function(e,t,n,r){e0=r;try{var i=t=t?el(S,t):"";if("/"===i.charAt(0))t=i;else{var o=-100===e?"/":eU(e).path;if(0==i.length)throw new eS(44);t=en(o+"/"+i)}var a=r?e1():0;return ez(t,n,a).X}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return-e.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=tr(e),t=th(t,"wrapper"),n=e9(n);var r=[].slice,i=t.i,o=i.N,a=i.A.N,s=i.A.constructor;for(var u in e=e4(e,function(){i.A.qb.forEach((function(e){if(this[e]===a[e])throw new tt(`Pure virtual function ${e} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:o}),this.__construct.apply(this,r.call(arguments))}),o.__construct=function(){this===o&&e8("Pass correct 'this' to __construct");var e=s.implement.apply(void 0,[this].concat(r.call(arguments)));td(e);var t=e.g;e.notifyOnDestruction(),t.ia=!0,Object.defineProperties(this,{g:{value:t}}),ty(this),e=tu(i,e=t.o),ts.hasOwnProperty(e)?e8(`Tried to register registered instance: ${e}`):ts[e]=this},o.__destruct=function(){this===o&&e8("Pass correct 'this' to __destruct"),td(this);var e=this.g.o;e=tu(i,e),ts.hasOwnProperty(e)?delete ts[e]:e8(`Tried to unregister unregistered instance: ${e}`)},e.prototype=Object.create(o),n)e.prototype[u]=n[u];return e7(e)},_embind_finalize_value_object:function(e){var t=tb[e];delete tb[e];var n=t.Pa,r=t.W,i=t.eb;tC([e],i.map(e=>e.Yb).concat(i.map(e=>e.rc)),e=>{var o={};return i.forEach((t,n)=>{var r=e[n],a=t.Wb,s=t.Xb,u=e[n+i.length],l=t.qc,c=t.sc;o[t.Sb]={read:e=>r.fromWireType(a(s,e)),write:(e,t)=>{var n=[];l(c,e,u.toWireType(n,t)),tw(n)}}}),[{name:t.name,fromWireType:function(e){var t,n={};for(t in o)n[t]=o[t].read(e);return r(e),n},toWireType:function(e,t){for(var i in o)if(!(i in t))throw TypeError(`Missing field: "${i}"`);var a=n();for(i in o)o[i].write(a,t[i]);return null!==e&&e.push(r,a),a},argPackAdvance:8,readValueFromPointer:tA,K:r}]})},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,r,i){var o=tx(n);tk(e,{name:t=tr(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var r=R;else if(2===n)r=M;else if(4===n)r=L;else throw TypeError("Unknown boolean type size: "+t);return this.fromWireType(r[e>>o])},K:null})},_embind_register_class:function(e,t,n,r,i,o,a,s,u,l,c,h,d){c=tr(c),o=tH(i,o),s&&(s=tH(a,s)),l&&(l=tH(u,l)),d=tH(h,d);var f=e2(c);tP(f,function(){t$(`Cannot construct ${c} due to unbound types`,[r])}),tC([e,t,n],r?[r]:[],function(t){if(t=t[0],r)var n=t.i,i=n.N;else i=tS.prototype;var a=Object.create(i,{constructor:{value:t=e4(f,function(){if(Object.getPrototypeOf(this)!==a)throw new e6("Use 'new' to construct "+c);if(void 0===u.$)throw new e6(c+" has no accessible constructor");var e=u.$[arguments.length];if(void 0===e)throw new e6(`Tried to invoke ctor of ${c} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(u.$).toString()}) parameters instead!`);return e.apply(this,arguments)})}});t.prototype=a;var u=new tL(c,t,a,d,n,o,s,l);u.A&&(void 0===u.A.oa&&(u.A.oa=[]),u.A.oa.push(u)),n=new tj(c,u,!0,!1),i=new tj(c+"*",u,!1,!1);var h=new tj(c+" const*",u,!1,!0);return tm[e]={pointerType:i,Kb:h},tD(f,t),[n,i,h]})},_embind_register_class_class_function:function(e,t,n,r,i,o,a){var s=tY(n,r);t=tr(t),o=tH(i,o),tC([],[e],function(e){function r(){t$(`Cannot call ${i} due to unbound types`,s)}e=e[0];var i=`${e.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var u=e.i.constructor;return void 0===u[t]?(r.ea=n-1,u[t]=r):(tM(u,t,i),u[t].B[n-1]=r),tC([],s,function(r){if(r=tq(i,[r[0],null].concat(r.slice(1)),null,o,a),void 0===u[t].B?(r.ea=n-1,u[t]=r):u[t].B[n-1]=r,e.i.oa)for(let n of e.i.oa)n.constructor.hasOwnProperty(t)||(n.constructor[t]=r);return[]}),[]})},_embind_register_class_class_property:function(e,t,n,r,i,o,a,s){t=tr(t),o=tH(i,o),tC([],[e],function(e){e=e[0];var i=`${e.name}.${t}`,u={get(){t$(`Cannot access ${i} due to unbound types`,[n])},enumerable:!0,configurable:!0};return u.set=s?()=>{t$(`Cannot access ${i} due to unbound types`,[n])}:()=>{e8(`${i} is a read-only property`)},Object.defineProperty(e.i.constructor,t,u),tC([],[n],function(n){n=n[0];var i={get:()=>n.fromWireType(o(r)),enumerable:!0};return s&&(s=tH(a,s),i.set=e=>{var t=[];s(r,n.toWireType(t,e)),tw(t)}),Object.defineProperty(e.i.constructor,t,i),[]}),[]})},_embind_register_class_constructor:function(e,t,n,r,i,o){var a=tY(t,n);i=tH(r,i),tC([],[e],function(e){e=e[0];var n=`constructor ${e.name}`;if(void 0===e.i.$&&(e.i.$=[]),void 0!==e.i.$[t-1])throw new e6(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.i.$[t-1]=()=>{t$(`Cannot construct ${e.name} due to unbound types`,a)},tC([],a,function(r){return r.splice(1,0,null),e.i.$[t-1]=tq(n,r,null,i,o),[]}),[]})},_embind_register_class_function:function(e,t,n,r,i,o,a,s){var u=tY(n,r);t=tr(t),o=tH(i,o),tC([],[e],function(e){function r(){t$(`Cannot call ${i} due to unbound types`,u)}e=e[0];var i=`${e.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.i.qb.push(t);var l=e.i.N,c=l[t];return void 0===c||void 0===c.B&&c.className!==e.name&&c.ea===n-2?(r.ea=n-2,r.className=e.name,l[t]=r):(tM(l,t,i),l[t].B[n-2]=r),tC([],u,function(r){return r=tq(i,r,e,o,a),void 0===l[t].B?(r.ea=n-2,l[t]=r):l[t].B[n-2]=r,[]}),[]})},_embind_register_class_property:function(e,t,n,r,i,o,a,s,u,l){t=tr(t),i=tH(r,i),tC([],[e],function(e){e=e[0];var r=`${e.name}.${t}`,c={get(){t$(`Cannot access ${r} due to unbound types`,[n,a])},enumerable:!0,configurable:!0};return c.set=u?()=>{t$(`Cannot access ${r} due to unbound types`,[n,a])}:()=>{e8(r+" is a read-only property")},Object.defineProperty(e.i.N,t,c),tC([],u?[n,a]:[n],function(n){var a=n[0],c={get(){var t=tG(this,e,r+" getter");return a.fromWireType(i(o,t))},enumerable:!0};if(u){u=tH(s,u);var h=n[1];c.set=function(t){var n=tG(this,e,r+" setter"),i=[];u(l,n,h.toWireType(i,t)),tw(i)}}return Object.defineProperty(e.i.N,t,c),[]}),[]})},_embind_register_emval:function(e,t){tk(e,{name:t=tr(t),fromWireType:function(e){var t=e9(e);return tX(e),t},toWireType:function(e,t){return e7(t)},argPackAdvance:8,readValueFromPointer:tA,K:null})},_embind_register_enum:function(e,t,n,r){function i(){}n=tx(n),t=tr(t),i.values={},tk(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:function(e,t,n){switch(t){case 0:return function(e){return this.fromWireType((n?R:S)[e])};case 1:return function(e){return this.fromWireType((n?M:P)[e>>1])};case 2:return function(e){return this.fromWireType((n?L:I)[e>>2])};default:throw TypeError("Unknown integer type: "+e)}}(t,n,r),K:null}),tP(t,i)},_embind_register_enum_value:function(e,t,n){var r=th(e,"enum");t=tr(t),e=r.constructor,r=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:e4(`${r.name}_${t}`,function(){})}}),e.values[n]=r,e[t]=r},_embind_register_float:function(e,t,n){n=tx(n),tk(e,{name:t=tr(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:function(e,t){switch(t){case 2:return function(e){return this.fromWireType(O[e>>2])};case 3:return function(e){return this.fromWireType(F[e>>3])};default:throw TypeError("Unknown float type: "+e)}}(t,n),K:null})},_embind_register_function:function(e,t,n,r,i,o){var a=tY(t,n);e=tr(e),i=tH(r,i),tP(e,function(){t$(`Cannot call ${e} due to unbound types`,a)},t-1),tC([],a,function(n){return tD(e,tq(e,[n[0],null].concat(n.slice(1)),null,i,o),t-1),[]})},_embind_register_integer:function(e,t,n,r,i){t=tr(t),-1===i&&(i=0xffffffff),i=tx(n);var o=e=>e;if(0===r){var a=32-8*n;o=e=>e<<a>>>a}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},tk(e,{name:t,fromWireType:o,toWireType:n,argPackAdvance:8,readValueFromPointer:function(e,t,n){switch(t){case 0:return n?function(e){return R[e]}:function(e){return S[e]};case 1:return n?function(e){return M[e>>1]}:function(e){return P[e>>1]};case 2:return n?function(e){return L[e>>2]}:function(e){return I[e>>2]};default:throw TypeError("Unknown integer type: "+e)}}(t,i,0!==r),K:null})},_embind_register_memory_view:function(e,t,n){function r(e){e>>=2;var t=I;return new i(t.buffer,t[e+1],t[e])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];tk(e,{name:n=tr(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{$b:!0})},_embind_register_std_string:function(e,t){var n="std::string"===(t=tr(t));tk(e,{name:t,fromWireType:function(e){var t=I[e>>2],r=e+4;if(n)for(var i=r,o=0;o<=t;++o){var a=r+o;if(o==t||0==S[a]){if(i=i?el(S,i,a-i):"",void 0===s)var s=i;else s+="\0",s+=i;i=a+1}}else{for(o=0,s=Array(t);o<t;++o)s[o]=String.fromCharCode(S[r+o]);s=s.join("")}return nl(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||e8("Cannot pass non-string to std::string");var i=n&&r?eh(t):t.length,o=nc(4+i+1),a=o+4;if(I[o>>2]=i,n&&r)ed(t,S,a,i+1);else if(r)for(r=0;r<i;++r){var s=t.charCodeAt(r);255<s&&(nl(a),e8("String has UTF-16 code units that do not fit in 8 bits")),S[a+r]=s}else for(r=0;r<i;++r)S[a+r]=t[r];return null!==e&&e.push(nl,o),o},argPackAdvance:8,readValueFromPointer:tA,K:function(e){nl(e)}})},_embind_register_std_wstring:function(e,t,n){if(n=tr(n),2===t)var r=tK,i=tQ,o=tZ,a=()=>P,s=1;else 4===t&&(r=t0,i=t1,o=t2,a=()=>I,s=2);tk(e,{name:n,fromWireType:function(e){for(var n,i=I[e>>2],o=a(),u=e+4,l=0;l<=i;++l){var c=e+4+l*t;(l==i||0==o[c>>s])&&(u=r(u,c-u),void 0===n?n=u:(n+="\0",n+=u),u=c+t)}return nl(e),n},toWireType:function(e,r){"string"!=typeof r&&e8(`Cannot pass non-string to C++ string type ${n}`);var a=o(r),u=nc(4+a+t);return I[u>>2]=a>>s,i(r,u+4,a+t),null!==e&&e.push(nl,u),u},argPackAdvance:8,readValueFromPointer:tA,K:function(e){nl(e)}})},_embind_register_value_object:function(e,t,n,r,i,o){tb[e]={name:tr(t),Pa:tH(n,r),W:tH(i,o),eb:[]}},_embind_register_value_object_field:function(e,t,n,r,i,o,a,s,u,l){tb[e].eb.push({Sb:tr(t),Yb:n,Wb:tH(r,i),Xb:o,rc:a,qc:tH(s,u),sc:l})},_embind_register_void:function(e,t){tk(e,{fc:!0,name:t=tr(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=e9(e),t=th(t,"emval::as");var r=[],i=e7(r);return I[n>>2]=i,t.toWireType(r,e)},_emval_call_method:function(e,t,n,r,i){e=t6[e],t=e9(t),n=t3(n);var o=[];return I[r>>2]=e7(o),e(t,n,o,i)},_emval_call_void_method:function(e,t,n,r){(e=t6[e])(t=e9(t),n=t3(n),null,r)},_emval_decref:tX,_emval_get_method_caller:function(e,t){var n,r,i=function(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=th(I[t+4*r>>2],"parameter "+r);return n}(e,t),o=i[0],a=t8[t=o.name+"_$"+i.slice(1).map(function(e){return e.name}).join("_")+"$"];if(void 0!==a)return a;var s=Array(e-1);return n=(t,n,r,a)=>{for(var u=0,l=0;l<e-1;++l)s[l]=i[l+1].readValueFromPointer(a+u),u+=i[l+1].argPackAdvance;for(l=0,t=t[n].apply(t,s);l<e-1;++l)i[l+1].Nb&&i[l+1].Nb(s[l]);if(!o.fc)return o.toWireType(r,t)},r=t6.length,t6.push(n),a=r,t8[t]=a},_emval_get_module_property:function(t){return e7(e[t=t3(t)])},_emval_get_property:function(e,t){return e7((e=e9(e))[t=e9(t)])},_emval_incref:function(e){4<e&&(e5.get(e).tb+=1)},_emval_new_array:function(){return e7([])},_emval_new_cstring:function(e){return e7(t3(e))},_emval_new_object:function(){return e7({})},_emval_run_destructors:function(e){tw(e9(e)),tX(e)},_emval_set_property:function(e,t,n){e=e9(e),t=e9(t),n=e9(n),e[t]=n},_emval_take_value:function(e,t){return e7(e=(e=th(e,"_emval_take_value")).readValueFromPointer(t))},abort:()=>{q("")},emscripten_asm_const_int:(e,t,n)=>{var r;for(t9.length=0,n>>=2;r=S[t++];)n+=105!=r&n,t9.push(105==r?L[n]:F[n++>>1]),++n;return Z[e].apply(null,t9)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>S.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=S.length;if(0x80000000<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+0x6000000);var i=Math;r=Math.max(e,r);e:{i=i.min.call(i,0x80000000,r+(65536-r%65536)%65536)-x.buffer.byteLength+65535>>>16;try{x.grow(i),j();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},environ_get:(e,t)=>{var n=0;return ne().forEach(function(r,i){var o=t+n;for(i=I[e+4*i>>2]=o,o=0;o<r.length;++o)R[i++>>0]=r.charCodeAt(o);R[i>>0]=0,n+=r.length+1}),0},environ_sizes_get:(e,t)=>{var n=ne();I[e>>2]=n.length;var r=0;return n.forEach(function(e){r+=e.length+1}),I[t>>2]=r,0},fd_close:function(e){try{var t=eU(e);if(null===t.X)throw new eS(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(e){throw e}finally{eC[t.X]=null}return t.X=null,0}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return e.aa}},fd_read:function(e,t,n,r){try{e:{var i=eU(e);e=t;for(var o,a=t=0;a<n;a++){var s=I[e>>2],u=I[e+4>>2];e+=8;var l=o,c=R;if(0>u||0>l)throw new eS(28);if(null===i.X||1==(2097155&i.flags))throw new eS(8);if(16384==(61440&i.node.mode))throw new eS(31);if(!i.m.read)throw new eS(28);var h=void 0!==l;if(h){if(!i.seekable)throw new eS(70)}else l=i.position;var d=i.m.read(i,c,s,u,l);if(h||(i.position+=d),0>d){var f=-1;break e}if(t+=d,d<u)break;void 0!==o&&(o+=d)}f=t}return I[r>>2]=f,0}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return e.aa}},fd_seek:function(e,t,n,r,i){t=n+2097152>>>0<4194305-!!t?(t>>>0)+0x100000000*n:NaN;try{if(isNaN(t))return 61;var o=eU(e);return eJ(o,t,r),Q=[o.position>>>0,(K=o.position,1<=+Math.abs(K)?0<K?+Math.floor(K/0x100000000)>>>0:~~+Math.ceil((K-+(~~K>>>0))/0x100000000)>>>0:0)],L[i>>2]=Q[0],L[i+4>>2]=Q[1],o.Ma&&0===t&&0===r&&(o.Ma=null),0}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return e.aa}},fd_write:function(e,t,n,r){try{e:{var i=eU(e);e=t;for(var o,a=t=0;a<n;a++){var s=I[e>>2],u=I[e+4>>2];e+=8;var l=o,c=R;if(0>u||0>l)throw new eS(28);if(null===i.X||0==(2097155&i.flags))throw new eS(8);if(16384==(61440&i.node.mode))throw new eS(31);if(!i.m.write)throw new eS(28);i.seekable&&1024&i.flags&&eJ(i,0,2);var h=void 0!==l;if(h){if(!i.seekable)throw new eS(70)}else l=i.position;var d=i.m.write(i,c,s,u,l,void 0);if(h||(i.position+=d),0>d){var f=-1;break e}t+=d,void 0!==o&&(o+=d)}f=t}return I[r>>2]=f,0}catch(e){if(void 0===eZ||"ErrnoError"!==e.name)throw e;return e.aa}},strftime_l:(e,t,n,r)=>ni(e,t,n,r)};!function(){function t(t){if(x=(k=t=t.exports).memory,j(),D=k.__indirect_function_table,U.unshift(k.__wasm_call_ctors),H--,e.monitorRunDependencies&&e.monitorRunDependencies(H),0==H&&(null!==W&&(clearInterval(W),W=null),$)){var n=$;$=null,n()}return t}var n,r,i={env:nu,wasi_snapshot_preview1:nu};if(H++,e.monitorRunDependencies&&e.monitorRunDependencies(H),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(e){E("Module.instantiateWasm callback failed with error: "+e),p(e)}(n=function(e){t(e.instance)},r=J,C||"function"!=typeof WebAssembly.instantiateStreaming||Y(r)||r.startsWith("file://")||"function"!=typeof fetch?z(r,i,n):fetch(r,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,i).then(n,function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),z(r,i,n)}))).catch(p)}();var nl=e=>(nl=k.free)(e),nc=e=>(nc=k.malloc)(e),nh=e._ma_device__on_notification_unlocked=t=>(nh=e._ma_device__on_notification_unlocked=k.ma_device__on_notification_unlocked)(t);e._ma_malloc_emscripten=(t,n)=>(e._ma_malloc_emscripten=k.ma_malloc_emscripten)(t,n),e._ma_free_emscripten=(t,n)=>(e._ma_free_emscripten=k.ma_free_emscripten)(t,n);var nd=e._ma_device_process_pcm_frames_capture__webaudio=(t,n,r)=>(nd=e._ma_device_process_pcm_frames_capture__webaudio=k.ma_device_process_pcm_frames_capture__webaudio)(t,n,r),nf=e._ma_device_process_pcm_frames_playback__webaudio=(t,n,r)=>(nf=e._ma_device_process_pcm_frames_playback__webaudio=k.ma_device_process_pcm_frames_playback__webaudio)(t,n,r),np=()=>(np=k.__errno_location)(),nm=e=>(nm=k.__getTypeName)(e);function n_(){function t(){if(!d&&(d=!0,e.calledRun=!0,!B)){if(e.noFSInit||eg||(eg=!0,eK(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?eQ("stdin",e.stdin):eG("/dev/tty","/dev/stdin"),e.stdout?eQ("stdout",null,e.stdout):eG("/dev/tty","/dev/stdout"),e.stderr?eQ("stderr",null,e.stderr):eG("/dev/tty1","/dev/stderr"),ez("/dev/stdin",0),ez("/dev/stdout",1),ez("/dev/stderr",1)),eR=!1,ee(U),f(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();V.unshift(t)}ee(V)}}if(!(0<H)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)!function(){var t=e.preRun.shift();N.unshift(t)}();ee(N),0<H||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t())}}if(e.__embind_initialize_bindings=()=>(e.__embind_initialize_bindings=k._embind_initialize_bindings)(),e.dynCall_iiji=(t,n,r,i,o)=>(e.dynCall_iiji=k.dynCall_iiji)(t,n,r,i,o),e.dynCall_jiji=(t,n,r,i,o)=>(e.dynCall_jiji=k.dynCall_jiji)(t,n,r,i,o),e.dynCall_iiiji=(t,n,r,i,o,a)=>(e.dynCall_iiiji=k.dynCall_iiiji)(t,n,r,i,o,a),e.dynCall_iij=(t,n,r,i)=>(e.dynCall_iij=k.dynCall_iij)(t,n,r,i),e.dynCall_jii=(t,n,r)=>(e.dynCall_jii=k.dynCall_jii)(t,n,r),e.dynCall_viijii=(t,n,r,i,o,a,s)=>(e.dynCall_viijii=k.dynCall_viijii)(t,n,r,i,o,a,s),e.dynCall_iiiiij=(t,n,r,i,o,a,s)=>(e.dynCall_iiiiij=k.dynCall_iiiiij)(t,n,r,i,o,a,s),e.dynCall_iiiiijj=(t,n,r,i,o,a,s,u,l)=>(e.dynCall_iiiiijj=k.dynCall_iiiiijj)(t,n,r,i,o,a,s,u,l),e.dynCall_iiiiiijj=(t,n,r,i,o,a,s,u,l,c)=>(e.dynCall_iiiiiijj=k.dynCall_iiiiiijj)(t,n,r,i,o,a,s,u,l,c),$=function e(){d||n_(),d||($=e)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return n_(),e.ready})},e=>{e.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.26.5","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>r.Animation});var r=n(4)},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>r});var r=function(){function e(e,t,n,r){this.animation=e,this.artboard=t,this.playing=r,this.loopCount=0,this.scrubTo=null,this.instance=new n.LinearAnimationInstance(e,t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.instance.time},set:function(e){this.instance.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){null===this.scrubTo?this.instance.advance(e):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},e.prototype.apply=function(e){this.instance.apply(e)},e.prototype.cleanup=function(){this.instance.delete()},e}()},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>i.BLANK_URL,registerTouchInteractions:()=>r.registerTouchInteractions,sanitizeUrl:()=>i.sanitizeUrl});var r=n(6),i=n(7)},(e,t,n)=>{n.r(t),n.d(t,{registerTouchInteractions:()=>o});var r=void 0,i=function(e,t){var n,r;return["touchstart","touchmove"].indexOf(e.type)>-1&&(null===(n=e.touches)||void 0===n?void 0:n.length)?(t||e.preventDefault(),{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):"touchend"===e.type&&(null===(r=e.changedTouches)||void 0===r?void 0:r.length)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}},o=function(e){var t=e.canvas,n=e.artboard,o=e.stateMachines,a=void 0===o?[]:o,s=e.renderer,u=e.rive,l=e.fit,c=e.alignment,h=e.isTouchScrollEnabled,d=void 0!==h&&h,f=e.layoutScaleFactor,p=void 0===f?1:f;if(!t||!a.length||!s||!u||!n||"undefined"==typeof window)return null;var m=null,_=!1,g=(function(e){if(_&&e instanceof MouseEvent){"mouseup"==e.type&&(_=!1);return}_=d&&"touchend"===e.type&&"touchstart"===m,m=e.type;var t=e.currentTarget.getBoundingClientRect(),r=i(e,d),o=r.clientX,s=r.clientY;if(o||s){var h=o-t.left,f=s-t.top,g=u.computeAlignment(l,c,{minX:0,minY:0,maxX:t.width,maxY:t.height},n.bounds,p),y=new u.Mat2D;g.invert(y);var b=new u.Vec2D(h,f),w=u.mapXY(y,b),A=w.x(),T=w.y();switch(w.delete(),y.delete(),b.delete(),g.delete(),e.type){case"mouseout":for(var E=0;E<a.length;E++){var C=a[E];C.pointerMove(A,T)}break;case"touchmove":case"mouseover":case"mousemove":for(var x=0;x<a.length;x++){var C=a[x];C.pointerMove(A,T)}break;case"touchstart":case"mousedown":for(var k=0;k<a.length;k++){var C=a[k];C.pointerDown(A,T)}break;case"touchend":case"mouseup":for(var R=0;R<a.length;R++){var C=a[R];C.pointerUp(A,T)}}}}).bind(r);return t.addEventListener("mouseover",g),t.addEventListener("mouseout",g),t.addEventListener("mousemove",g),t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("touchmove",g,{passive:d}),t.addEventListener("touchstart",g,{passive:d}),t.addEventListener("touchend",g),function(){t.removeEventListener("mouseover",g),t.removeEventListener("mouseout",g),t.removeEventListener("mousemove",g),t.removeEventListener("mousedown",g),t.removeEventListener("mouseup",g),t.removeEventListener("touchmove",g),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",g)}}},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>l,sanitizeUrl:()=>c});var r=/^([^\w]*)(javascript|data|vbscript)/im,i=/&#(\w+)(^\w|;)?/g,o=/&(newline|tab);/gi,a=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,u=[".","/"],l="about:blank";function c(e){if(!e)return l;var t=e.replace(a,"").replace(i,function(e,t){return String.fromCharCode(t)}).replace(o,"").replace(a,"").trim();if(!t)return l;if(u.indexOf(t[0])>-1)return t;var n=t.match(s);if(!n)return t;var c=n[0];return r.test(c)?l:t}}],et={};function en(e){var t=et[e];if(void 0!==t)return t.exports;var n=et[e]={exports:{}};return ee[e](n,n.exports,en),n.exports}en.d=(e,t)=>{for(var n in t)en.o(t,n)&&!en.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},en.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),en.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var er={};return en.r(er),en.d(er,{Alignment:()=>t,DataEnum:()=>N,EventType:()=>i,Fit:()=>e,Layout:()=>b,LoopType:()=>o,Rive:()=>j,RiveEventType:()=>r,RiveFile:()=>B,RuntimeLoader:()=>w,StateMachineInput:()=>T,StateMachineInputType:()=>n,Testing:()=>J,ViewModel:()=>D,ViewModelInstance:()=>U,ViewModelInstanceBoolean:()=>$,ViewModelInstanceColor:()=>G,ViewModelInstanceEnum:()=>Y,ViewModelInstanceNumber:()=>W,ViewModelInstanceString:()=>H,ViewModelInstanceTrigger:()=>q,ViewModelInstanceValue:()=>V,decodeAudio:()=>K,decodeFont:()=>Z,decodeImage:()=>Q}),s=en(1),u=en(2),l=en(3),c=en(5),h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},d=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})},m=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var l=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHandledError=!0,t}return d(t,e),t}(Error),(g=e||(e={})).Cover="cover",g.Contain="contain",g.Fill="fill",g.FitWidth="fitWidth",g.FitHeight="fitHeight",g.None="none",g.ScaleDown="scaleDown",g.Layout="layout",(y=t||(t={})).Center="center",y.TopLeft="topLeft",y.TopCenter="topCenter",y.TopRight="topRight",y.CenterLeft="centerLeft",y.CenterRight="centerRight",y.BottomLeft="bottomLeft",y.BottomCenter="bottomCenter",y.BottomRight="bottomRight",b=function(){function n(n){var r,i,o,a,s,u,l;this.fit=null!==(r=null==n?void 0:n.fit)&&void 0!==r?r:e.Contain,this.alignment=null!==(i=null==n?void 0:n.alignment)&&void 0!==i?i:t.Center,this.layoutScaleFactor=null!==(o=null==n?void 0:n.layoutScaleFactor)&&void 0!==o?o:1,this.minX=null!==(a=null==n?void 0:n.minX)&&void 0!==a?a:0,this.minY=null!==(s=null==n?void 0:n.minY)&&void 0!==s?s:0,this.maxX=null!==(u=null==n?void 0:n.maxX)&&void 0!==u?u:0,this.maxY=null!==(l=null==n?void 0:n.maxY)&&void 0!==l?l:0}return n.new=function(e){var t=e.fit,r=e.alignment,i=e.minX,o=e.minY,a=e.maxX,s=e.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new n({fit:t,alignment:r,minX:i,minY:o,maxX:a,maxY:s})},n.prototype.copyWith=function(e){var t=e.fit,r=e.alignment,i=e.layoutScaleFactor,o=e.minX,a=e.minY,s=e.maxX,u=e.maxY;return new n({fit:null!=t?t:this.fit,alignment:null!=r?r:this.alignment,layoutScaleFactor:null!=i?i:this.layoutScaleFactor,minX:null!=o?o:this.minX,minY:null!=a?a:this.minY,maxX:null!=s?s:this.maxX,maxY:null!=u?u:this.maxY})},n.prototype.runtimeFit=function(t){var n;return this.cachedRuntimeFit?this.cachedRuntimeFit:(n=this.fit===e.Cover?t.Fit.cover:this.fit===e.Contain?t.Fit.contain:this.fit===e.Fill?t.Fit.fill:this.fit===e.FitWidth?t.Fit.fitWidth:this.fit===e.FitHeight?t.Fit.fitHeight:this.fit===e.ScaleDown?t.Fit.scaleDown:this.fit===e.Layout?t.Fit.layout:t.Fit.none,this.cachedRuntimeFit=n,n)},n.prototype.runtimeAlignment=function(e){var n;return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(n=this.alignment===t.TopLeft?e.Alignment.topLeft:this.alignment===t.TopCenter?e.Alignment.topCenter:this.alignment===t.TopRight?e.Alignment.topRight:this.alignment===t.CenterLeft?e.Alignment.centerLeft:this.alignment===t.CenterRight?e.Alignment.centerRight:this.alignment===t.BottomLeft?e.Alignment.bottomLeft:this.alignment===t.BottomCenter?e.Alignment.bottomCenter:this.alignment===t.BottomRight?e.Alignment.bottomRight:e.Alignment.center,this.cachedRuntimeAlignment=n,n)},n}(),w=function(){function e(){}return e.loadRuntime=function(){s.default({locateFile:function(){return e.wasmURL}}).then(function(t){var n;for(e.runtime=t;e.callBackQueue.length>0;)null===(n=e.callBackQueue.shift())||void 0===n||n(e.runtime)}).catch(function(t){var n={message:(null==t?void 0:t.message)||"Unknown error",type:(null==t?void 0:t.name)||"Error",wasmError:t instanceof WebAssembly.CompileError||t instanceof WebAssembly.RuntimeError,originalError:t};console.debug("Rive WASM load error details:",n);var r="https://cdn.jsdelivr.net/npm/".concat(u.name,"@").concat(u.version,"/rive_fallback.wasm");e.wasmURL.toLowerCase()!==r?(console.warn("Failed to load WASM from ".concat(e.wasmURL," (").concat(n.message,"), trying jsdelivr as a backup")),e.setWasmUrl(r),e.loadRuntime()):console.error(["Could not load Rive WASM file from ".concat(e.wasmURL," or ").concat(r,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible","\nError details:","- Type: ".concat(n.type),"- Message: ".concat(n.message),"- WebAssembly-specific error: ".concat(n.wasmError),"\nTo resolve, you may need to:","1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join("\n"))})},e.getInstance=function(t){e.isLoading||(e.isLoading=!0,e.loadRuntime()),e.runtime?t(e.runtime):e.callBackQueue.push(t)},e.awaitInstance=function(){return new Promise(function(t){return e.getInstance(function(e){return t(e)})})},e.setWasmUrl=function(t){e.wasmURL=t},e.getWasmUrl=function(){return e.wasmURL},e.isLoading=!1,e.callBackQueue=[],e.wasmURL="https://unpkg.com/".concat(u.name,"@").concat(u.version,"/rive.wasm"),e}(),(A=n||(n={}))[A.Number=56]="Number",A[A.Trigger=58]="Trigger",A[A.Boolean=59]="Boolean",T=function(){function e(e,t){this.type=e,this.runtimeInput=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(e){this.runtimeInput.value=e},enumerable:!1,configurable:!0}),e.prototype.fire=function(){this.type===n.Trigger&&this.runtimeInput.fire()},e.prototype.delete=function(){this.runtimeInput=null},e}(),(E=r||(r={}))[E.General=128]="General",E[E.OpenUrl=131]="OpenUrl",C=function(){function e(e,t,n,r){this.stateMachine=e,this.playing=n,this.artboard=r,this.inputs=[],this.instance=new t.StateMachineInstance(e,r),this.initInputs(t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statesChanged",{get:function(){for(var e=[],t=0;t<this.instance.stateChangedCount();t++)e.push(this.instance.stateChangedNameByIndex(t));return e},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){this.instance.advance(e)},e.prototype.advanceAndApply=function(e){this.instance.advanceAndApply(e)},e.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},e.prototype.reportedEventAt=function(e){return this.instance.reportedEventAt(e)},e.prototype.initInputs=function(e){for(var t=0;t<this.instance.inputCount();t++){var n=this.instance.input(t);this.inputs.push(this.mapRuntimeInput(n,e))}},e.prototype.mapRuntimeInput=function(e,t){return e.type===t.SMIInput.bool?new T(n.Boolean,e.asBool()):e.type===t.SMIInput.number?new T(n.Number,e.asNumber()):e.type===t.SMIInput.trigger?new T(n.Trigger,e.asTrigger()):void 0},e.prototype.cleanup=function(){this.inputs.forEach(function(e){e.delete()}),this.inputs.length=0,this.instance.delete()},e.prototype.bindViewModelInstance=function(e){null!=e.runtimeInstance&&this.instance.bindViewModelInstance(e.runtimeInstance)},e}(),x=function(){function e(e,t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=[]),this.runtime=e,this.artboard=t,this.eventManager=n,this.animations=r,this.stateMachines=i}return e.prototype.add=function(e,t,n){if(void 0===n&&(n=!0),0===(e=z(e)).length)this.animations.forEach(function(e){return e.playing=t}),this.stateMachines.forEach(function(e){return e.playing=t});else for(var r=this.animations.map(function(e){return e.name}),o=this.stateMachines.map(function(e){return e.name}),a=0;a<e.length;a++){var s=r.indexOf(e[a]),u=o.indexOf(e[a]);if(s>=0||u>=0)s>=0?this.animations[s].playing=t:this.stateMachines[u].playing=t;else{var c=this.artboard.animationByName(e[a]);if(c){var h=new l.Animation(c,this.artboard,this.runtime,t);h.advance(0),h.apply(1),this.animations.push(h)}else{var d=this.artboard.stateMachineByName(e[a]);if(d){var f=new C(d,this.runtime,t,this.artboard);this.stateMachines.push(f)}}}}return n&&(t?this.eventManager.fire({type:i.Play,data:this.playing}):this.eventManager.fire({type:i.Pause,data:this.paused})),t?this.playing:this.paused},e.prototype.initLinearAnimations=function(e,t){for(var n=this.animations.map(function(e){return e.name}),r=0;r<e.length;r++){var i=n.indexOf(e[r]);if(i>=0)this.animations[i].playing=t;else{var o=this.artboard.animationByName(e[r]);if(o){var a=new l.Animation(o,this.artboard,this.runtime,t);a.advance(0),a.apply(1),this.animations.push(a)}}}},e.prototype.initStateMachines=function(e,t){for(var n=this.stateMachines.map(function(e){return e.name}),r=0;r<e.length;r++){var i=n.indexOf(e[r]);if(i>=0)this.stateMachines[i].playing=t;else{var o=this.artboard.stateMachineByName(e[r]);if(o){var a=new C(o,this.runtime,t,this.artboard);this.stateMachines.push(a),t||a.advanceAndApply(0)}else this.initLinearAnimations([e[r]],t)}}},e.prototype.play=function(e){return this.add(e,!0)},e.prototype.pause=function(e){return this.add(e,!1)},e.prototype.scrub=function(e,t){var n=this.animations.filter(function(t){return e.includes(t.name)});return n.forEach(function(e){return e.scrubTo=t}),n.map(function(e){return e.name})},Object.defineProperty(e.prototype,"playing",{get:function(){return this.animations.filter(function(e){return e.playing}).map(function(e){return e.name}).concat(this.stateMachines.filter(function(e){return e.playing}).map(function(e){return e.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.animations.filter(function(e){return!e.playing}).map(function(e){return e.name}).concat(this.stateMachines.filter(function(e){return!e.playing}).map(function(e){return e.name}))},enumerable:!1,configurable:!0}),e.prototype.stop=function(e){var t=this;e=z(e);var n=[];if(0===e.length)n=this.animations.map(function(e){return e.name}).concat(this.stateMachines.map(function(e){return e.name})),this.animations.forEach(function(e){return e.cleanup()}),this.stateMachines.forEach(function(e){return e.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var r=this.animations.filter(function(t){return e.includes(t.name)});r.forEach(function(e){e.cleanup(),t.animations.splice(t.animations.indexOf(e),1)});var o=this.stateMachines.filter(function(t){return e.includes(t.name)});o.forEach(function(e){e.cleanup(),t.stateMachines.splice(t.stateMachines.indexOf(e),1)}),n=r.map(function(e){return e.name}).concat(o.map(function(e){return e.name}))}return this.eventManager.fire({type:i.Stop,data:n}),n},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(e,t){return e||t.playing},!1)||this.stateMachines.reduce(function(e,t){return e||t.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),e.prototype.atLeastOne=function(e,t){var n;return void 0===t&&(t=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([n=this.artboard.animationByIndex(0).name],e,t):this.artboard.stateMachineCount()>0&&this.add([n=this.artboard.stateMachineByIndex(0).name],e,t)),n},e.prototype.handleLooping=function(){for(var e=0,t=this.animations.filter(function(e){return e.playing});e<t.length;e++){var n=t[e];0===n.loopValue&&n.loopCount?(n.loopCount=0,this.stop(n.name)):1===n.loopValue&&n.loopCount?(this.eventManager.fire({type:i.Loop,data:{animation:n.name,type:o.Loop}}),n.loopCount=0):2===n.loopValue&&n.loopCount>1&&(this.eventManager.fire({type:i.Loop,data:{animation:n.name,type:o.PingPong}}),n.loopCount=0)}},e.prototype.handleStateChanges=function(){for(var e=[],t=0,n=this.stateMachines.filter(function(e){return e.playing});t<n.length;t++){var r=n[t];e.push.apply(e,r.statesChanged)}e.length>0&&this.eventManager.fire({type:i.StateChange,data:e})},e.prototype.handleAdvancing=function(e){this.eventManager.fire({type:i.Advance,data:e})},e}(),(k=i||(i={})).Load="load",k.LoadError="loaderror",k.Play="play",k.Pause="pause",k.Stop="stop",k.Loop="loop",k.Draw="draw",k.Advance="advance",k.StateChange="statechange",k.RiveEvent="riveevent",k.AudioStatusChange="audiostatuschange",(R=o||(o={})).OneShot="oneshot",R.Loop="loop",R.PingPong="pingpong",S=function(){function e(e){void 0===e&&(e=[]),this.listeners=e}return e.prototype.getListeners=function(e){return this.listeners.filter(function(t){return t.type===e})},e.prototype.add=function(e){this.listeners.includes(e)||this.listeners.push(e)},e.prototype.remove=function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t];if(n.type===e.type&&n.callback===e.callback){this.listeners.splice(t,1);break}}},e.prototype.removeAll=function(e){var t=this;e?this.listeners.filter(function(t){return t.type===e}).forEach(function(e){return t.remove(e)}):this.listeners.splice(0,this.listeners.length)},e.prototype.fire=function(e){this.getListeners(e.type).forEach(function(t){return t.callback(e)})},e}(),M=function(){function e(e){this.eventManager=e,this.queue=[]}return e.prototype.add=function(e){this.queue.push(e)},e.prototype.process=function(){for(;this.queue.length>0;){var e=this.queue.shift();(null==e?void 0:e.action)&&e.action(),(null==e?void 0:e.event)&&this.eventManager.fire(e.event)}},e}(),(P=a||(a={}))[P.AVAILABLE=0]="AVAILABLE",P[P.UNAVAILABLE=1]="UNAVAILABLE",L=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._started=!1,t._enabled=!1,t._status=a.UNAVAILABLE,t}return d(t,e),t.prototype.delay=function(e){return p(this,void 0,void 0,function(){return m(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},t.prototype.timeout=function(){return p(this,void 0,void 0,function(){return m(this,function(e){return[2,new Promise(function(e,t){return setTimeout(t,50)})]})})},t.prototype.reportToListeners=function(){this.fire({type:i.AudioStatusChange}),this.removeAll()},t.prototype.enableAudio=function(){return p(this,void 0,void 0,function(){return m(this,function(e){return this._enabled||(this._enabled=!0,this._status=a.AVAILABLE,this.reportToListeners()),[2]})})},t.prototype.testAudio=function(){return p(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:if(this._status!==a.UNAVAILABLE||null===this._audioContext)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return e.sent(),this.enableAudio(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})})},t.prototype._establishAudio=function(){return p(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:if(this._started)return[3,5];if(this._started=!0,"undefined"!=typeof window)return[3,1];return this.enableAudio(),[3,5];case 1:this._audioContext=new AudioContext,this.listenForUserAction(),e.label=2;case 2:if(this._status!==a.UNAVAILABLE)return[3,5];return[4,this.testAudio()];case 3:return e.sent(),[4,this.delay(1e3)];case 4:return e.sent(),[3,2];case 5:return[2]}})})},t.prototype.listenForUserAction=function(){var e=this;document.addEventListener("pointerdown",function(){return p(e,void 0,void 0,function(){return m(this,function(e){return this.enableAudio(),[2]})})},{once:!0})},t.prototype.establishAudio=function(){return p(this,void 0,void 0,function(){return m(this,function(e){return this._establishAudio(),[2]})})},Object.defineProperty(t.prototype,"systemVolume",{get:function(){return this._status===a.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t}(S)),I=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),O=globalThis.ResizeObserver||I,F=new(function(){function e(){var e=this;this._elementsMap=new Map,this._onObservedEntry=function(t){var n=e._elementsMap.get(t.target);null!==n?n.onResize(0==t.target.clientWidth||0==t.target.clientHeight):e._resizeObserver.unobserve(t.target)},this._onObserved=function(t){t.forEach(e._onObservedEntry)},this._resizeObserver=new O(this._onObserved)}return e.prototype.add=function(e,t){var n={onResize:t,element:e};return this._elementsMap.set(e,n),this._resizeObserver.observe(e),n},e.prototype.remove=function(e){this._resizeObserver.unobserve(e.element),this._elementsMap.delete(e.element)},e}()),B=function(){function e(e){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=e.src,this.buffer=e.buffer,e.assetLoader&&(this.assetLoader=e.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(i.Load,e.onLoad),e.onLoadError&&this.on(i.LoadError,e.onLoadError)}return e.prototype.initData=function(){return p(this,void 0,void 0,function(){var t,n,r,o;return m(this,function(a){switch(a.label){case 0:if(!this.src)return[3,2];return t=this,[4,X(this.src)];case 1:t.buffer=a.sent(),a.label=2;case 2:if(this.destroyed)return[2];return this.assetLoader&&(n=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),r=this,[4,this.runtime.load(new Uint8Array(this.buffer),n,this.enableRiveAssetCDN)];case 3:if(r.file=a.sent(),this.destroyed)return null===(o=this.file)||void 0===o||o.delete(),this.file=null,[2];if(null!==this.file)this.eventManager.fire({type:i.Load,data:this});else throw this.eventManager.fire({type:i.LoadError,data:null}),Error(e.fileLoadErrorMessage);return[2]}})})},e.prototype.init=function(){return p(this,void 0,void 0,function(){var t;return m(this,function(n){switch(n.label){case 0:if(!this.src&&!this.buffer)throw Error(e.missingErrorMessage);return t=this,[4,w.awaitInstance()];case 1:if(t.runtime=n.sent(),this.destroyed)return[2];return[4,this.initData()];case 2:return n.sent(),[2]}})})},e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.cleanup=function(){var e;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(e=this.file)||void 0===e||e.delete(),this.file=null,this.destroyed=!0)},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},e.missingErrorMessage="Rive source file or data buffer required",e.fileLoadErrorMessage="The file failed to load",e}(),j=function(){function t(e){var t,n=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this._viewModelInstance=null,this._dataEnums=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(e){var t=n._hasZeroSize!==e;n._hasZeroSize=e,e?n._layout.maxX&&n._layout.maxY||n.resizeToCanvas():t&&n.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=e.canvas,e.canvas.constructor===HTMLCanvasElement&&(this._observed=F.add(this.canvas,this.onCanvasResize)),this.src=e.src,this.buffer=e.buffer,this.riveFile=e.riveFile,this.layout=null!==(t=e.layout)&&void 0!==t?t:new b,this.shouldDisableRiveListeners=!!e.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!e.isTouchScrollEnabled,this.automaticallyHandleEvents=!!e.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(i.Load,e.onLoad),e.onLoadError&&this.on(i.LoadError,e.onLoadError),e.onPlay&&this.on(i.Play,e.onPlay),e.onPause&&this.on(i.Pause,e.onPause),e.onStop&&this.on(i.Stop,e.onStop),e.onLoop&&this.on(i.Loop,e.onLoop),e.onStateChange&&this.on(i.StateChange,e.onStateChange),e.onAdvance&&this.on(i.Advance,e.onAdvance),e.onload&&!e.onLoad&&this.on(i.Load,e.onload),e.onloaderror&&!e.onLoadError&&this.on(i.LoadError,e.onloaderror),e.onplay&&!e.onPlay&&this.on(i.Play,e.onplay),e.onpause&&!e.onPause&&this.on(i.Pause,e.onpause),e.onstop&&!e.onStop&&this.on(i.Stop,e.onstop),e.onloop&&!e.onLoop&&this.on(i.Loop,e.onloop),e.onstatechange&&!e.onStateChange&&this.on(i.StateChange,e.onstatechange),e.assetLoader&&(this.assetLoader=e.assetLoader),this.taskQueue=new M(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:e.autoplay,autoBind:e.autoBind,animations:e.animations,stateMachines:e.stateMachines,artboard:e.artboard,useOffscreenRenderer:e.useOffscreenRenderer})}return t.new=function(e){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new t(e)},t.prototype.onSystemAudioChanged=function(){this.volume=this._volume},t.prototype.init=function(e){var n=this,r=e.src,i=e.buffer,o=e.riveFile,a=e.animations,s=e.stateMachines,u=e.artboard,l=e.autoplay,c=void 0!==l&&l,h=e.useOffscreenRenderer,d=void 0!==h&&h,f=e.autoBind,p=void 0!==f&&f;if(!this.destroyed){if(this.src=r,this.buffer=i,this.riveFile=o,!this.src&&!this.buffer&&!this.riveFile)throw new _(t.missingErrorMessage);var m=z(a),g=z(s);this.loaded=!1,this.readyForPlaying=!1,w.awaitInstance().then(function(e){n.destroyed||(n.runtime=e,n.removeRiveListeners(),n.deleteRiveRenderer(),n.renderer=n.runtime.makeRenderer(n.canvas,d),n.canvas.width||n.canvas.height||n.resizeDrawingSurfaceToCanvas(),n.initData(u,m,g,c,p).then(function(){return n.setupRiveListeners()}).catch(function(e){console.error(e)}))}).catch(function(e){console.error(e)})}},t.prototype.setupRiveListeners=function(e){var t=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var n=(this.animator.stateMachines||[]).filter(function(e){return e.playing&&t.runtime.hasListeners(e.instance)}).map(function(e){return e.instance}),r=this.isTouchScrollEnabled;e&&"isTouchScrollEnabled"in e&&(r=e.isTouchScrollEnabled),this.eventCleanup=(0,c.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:n,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:r,layoutScaleFactor:this._layout.layoutScaleFactor})}},t.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},t.prototype.initializeAudio=function(){var e,t=this;L.status==a.UNAVAILABLE&&(null===(e=this.artboard)||void 0===e?void 0:e.hasAudio)&&null===this._audioEventListener&&(this._audioEventListener={type:i.AudioStatusChange,callback:function(){return t.onSystemAudioChanged()}},L.add(this._audioEventListener),L.establishAudio())},t.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},t.prototype.initData=function(e,n,r,o,a){return p(this,void 0,void 0,function(){var s,u;return m(this,function(l){switch(l.label){case 0:if(l.trys.push([0,3,,4]),null!=this.riveFile)return[3,2];return this.riveFile=new B({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()];case 1:l.sent(),l.label=2;case 2:if(!this.riveFile)throw new _(t.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(e,n,r,o,a),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:i.Load,data:null!==(u=this.src)&&void 0!==u?u:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:var c;return console.warn(s=(c=l.sent())&&c.isHandledError?c.message:"Problem loading file; may be corrupt!"),this.eventManager.fire({type:i.LoadError,data:s}),[2,Promise.reject(s)];case 4:return[2]}})})},t.prototype.initArtboard=function(e,t,n,r,o){if(this.file){var a,s=e?this.file.artboardByName(e):this.file.defaultArtboard();if(!s){var u="Invalid artboard name or no default artboard";console.warn(u),this.eventManager.fire({type:i.LoadError,data:u});return}if(this.artboard=s,s.volume=this._volume*L.systemVolume,1>this.artboard.animationCount()){var u="Artboard has no animations";throw this.eventManager.fire({type:i.LoadError,data:u}),u}if(this.animator=new x(this.runtime,this.artboard,this.eventManager),t.length>0||n.length>0?(a=t.concat(n),this.animator.initLinearAnimations(t,r),this.animator.initStateMachines(n,r)):a=[this.animator.atLeastOne(r,!1)],this.taskQueue.add({event:{type:r?i.Play:i.Pause,data:a}}),o){var l=this.file.defaultArtboardViewModel(s);if(null!==l){var c=l.defaultInstance();if(null!==c){var h=new U(c,null);this.bindViewModelInstance(h)}}}}},t.prototype.drawFrame=function(){var e,t;(null===(e=null==document?void 0:document.timeline)||void 0===e?void 0:e.currentTime)?this.loaded&&this.artboard&&!this.frameRequestId&&(this._boundDraw(document.timeline.currentTime),null===(t=this.runtime)||void 0===t||t.resolveAnimationFrame()):this.startRendering()},t.prototype.draw=function(e,t){this.frameRequestId=null;var n,o=performance.now();this.lastRenderTime||(this.lastRenderTime=e),this.renderSecondTimer+=e-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==t||t());var a=(e-this.lastRenderTime)/1e3;this.lastRenderTime=e;for(var s=this.animator.animations.filter(function(e){return e.playing||e.needsScrub}).sort(function(e){return e.needsScrub?-1:1}),u=0;u<s.length;u++){var l=s[u];l.advance(a),l.instance.didLoop&&(l.loopCount+=1),l.apply(1)}for(var h=this.animator.stateMachines.filter(function(e){return e.playing}),d=0;d<h.length;d++){var f=h[d],p=f.reportedEventCount();if(p)for(var m=0;m<p;m++){var _=f.reportedEventAt(m);if(_)if(_.type===r.OpenUrl){if(this.eventManager.fire({type:i.RiveEvent,data:_}),this.automaticallyHandleEvents){var g=document.createElement("a"),y=_.url,b=_.target,w=(0,c.sanitizeUrl)(y);y&&g.setAttribute("href",w),b&&g.setAttribute("target",b),w&&w!==c.BLANK_URL&&g.click()}}else this.eventManager.fire({type:i.RiveEvent,data:_})}f.advanceAndApply(a)}0==this.animator.stateMachines.length&&this.artboard.advance(a);var A=this.renderer;A.clear(),A.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(A),A.restore(),A.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(a),this.frameCount++;var T=performance.now();for(this.frameTimes.push(T),this.durations.push(T-o);this.frameTimes[0]<=T-1e3;)this.frameTimes.shift(),this.durations.shift();null===(n=this._viewModelInstance)||void 0===n||n.handleCallbacks(),this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},t.prototype.alignRenderer=function(){var e=this.renderer,t=this.runtime,n=this._layout,r=this.artboard;e.align(n.runtimeFit(t),n.runtimeAlignment(t),{minX:n.minX,minY:n.minY,maxX:n.maxX,maxY:n.maxY},r.bounds,this._devicePixelRatioUsed*n.layoutScaleFactor)},Object.defineProperty(t.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce(function(e,t){return e+t},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),t.prototype.cleanup=function(){var e,t;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),null!==this._observed&&F.remove(this._observed),this.removeRiveListeners(),this.file&&(null===(e=this.riveFile)||void 0===e||e.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),null!==this._audioEventListener&&(L.remove(this._audioEventListener),this._audioEventListener=null),null===(t=this._viewModelInstance)||void 0===t||t.cleanup(),this._viewModelInstance=null,this._dataEnums=null},t.prototype.deleteRiveRenderer=function(){var e;null===(e=this.renderer)||void 0===e||e.delete(),this.renderer=null},t.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},t.prototype.retrieveTextRun=function(e){if(!e){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var t,n=this.artboard.textRun(e);if(!n){console.warn("Could not access a text run with name '".concat(e,"' in the '").concat(null===(t=this.artboard)||void 0===t?void 0:t.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return n},t.prototype.getTextRunValue=function(e){var t=this.retrieveTextRun(e);return t?t.text:void 0},t.prototype.setTextRunValue=function(e,t){var n=this.retrieveTextRun(e);n&&(n.text=t)},t.prototype.play=function(e,t){var n=this;if(e=z(e),!this.readyForPlaying){this.taskQueue.add({action:function(){return n.play(e,t)}});return}this.animator.play(e),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},t.prototype.pause=function(e){var t=this;if(e=z(e),!this.readyForPlaying){this.taskQueue.add({action:function(){return t.pause(e)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(e)},t.prototype.scrub=function(e,t){var n=this;if(e=z(e),!this.readyForPlaying){this.taskQueue.add({action:function(){return n.scrub(e,t)}});return}this.animator.scrub(e,t||0),this.drawFrame()},t.prototype.stop=function(e){var t=this;if(e=z(e),!this.readyForPlaying){this.taskQueue.add({action:function(){return t.stop(e)}});return}this.animator&&this.animator.stop(e),this.eventCleanup&&this.eventCleanup()},t.prototype.reset=function(e){var t,n,r=null==e?void 0:e.artboard,i=z(null==e?void 0:e.animations),o=z(null==e?void 0:e.stateMachines),a=null!==(t=null==e?void 0:e.autoplay)&&void 0!==t&&t,s=null!==(n=null==e?void 0:e.autoBind)&&void 0!==n&&n;this.cleanupInstances(),this.initArtboard(r,i,o,a,s),this.taskQueue.process()},t.prototype.load=function(e){this.file=null,this.stop(),this.init(e)},Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,e.maxX&&e.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),t.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},t.prototype.resizeDrawingSurfaceToCanvas=function(t){if(this.canvas instanceof HTMLCanvasElement&&window){var n=this.canvas.getBoundingClientRect(),r=n.width,i=n.height,o=t||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=o,this.canvas.width=o*r,this.canvas.height=o*i,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===e.Layout){var a=this._layout.layoutScaleFactor;this.artboard.width=r/a,this.artboard.height=i/a}}},Object.defineProperty(t.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.animationCount();t++)e.push(this.artboard.animationByIndex(t).name);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.stateMachineCount();t++)e.push(this.artboard.stateMachineByIndex(t).name);return e},enumerable:!1,configurable:!0}),t.prototype.stateMachineInputs=function(e){if(this.loaded){var t=this.animator.stateMachines.find(function(t){return t.name===e});return null==t?void 0:t.inputs}},t.prototype.retrieveInputAtPath=function(e,t){if(!e){console.warn("No input name provided for path '".concat(t,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));return}var n=this.artboard.inputByPath(e,t);if(!n){console.warn("Could not access an input with name: '".concat(e,"', at path:'").concat(t,"'"));return}return n},t.prototype.setBooleanStateAtPath=function(e,t,r){var i=this.retrieveInputAtPath(e,r);i&&(i.type===n.Boolean?i.asBool().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(r,"' is not a boolean")))},t.prototype.setNumberStateAtPath=function(e,t,r){var i=this.retrieveInputAtPath(e,r);i&&(i.type===n.Number?i.asNumber().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(r,"' is not a number")))},t.prototype.fireStateAtPath=function(e,t){var r=this.retrieveInputAtPath(e,t);r&&(r.type===n.Trigger?r.asTrigger().fire():console.warn("Input with name: '".concat(e,"', at path:'").concat(t,"' is not a trigger")))},t.prototype.retrieveTextAtPath=function(e,t){if(!e){console.warn("No text name provided for path '".concat(t,"'"));return}if(!t){console.warn("No path provided for text '".concat(e,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));return}var n=this.artboard.textByPath(e,t);if(!n){console.warn("Could not access text with name: '".concat(e,"', at path:'").concat(t,"'"));return}return n},t.prototype.getTextRunValueAtPath=function(e,t){var n=this.retrieveTextAtPath(e,t);if(!n){console.warn("Could not get text with name: '".concat(e,"', at path:'").concat(t,"'"));return}return n.text},t.prototype.setTextRunValueAtPath=function(e,t,n){var r=this.retrieveTextAtPath(e,n);if(!r){console.warn("Could not set text with name: '".concat(e,"', at path:'").concat(n,"'"));return}r.text=t},Object.defineProperty(t.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(e){return e.playing}).map(function(e){return e.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(e){return e.playing}).map(function(e){return e.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(e){return!e.playing}).map(function(e){return e.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(e){return!e.playing}).map(function(e){return e.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),t.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},t.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},t.prototype.unsubscribe=function(e,t){console.warn("This function is deprecated: please use `off()` instead."),this.off(e,t)},t.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},t.prototype.unsubscribeAll=function(e){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(e)},t.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},t.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},t.prototype.enableFPSCounter=function(e){this.runtime.enableFPSCounter(e)},t.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(t.prototype,"contents",{get:function(){if(this.loaded){for(var e={artboards:[]},t=0;t<this.file.artboardCount();t++){for(var n=this.file.artboardByIndex(t),r={name:n.name,animations:[],stateMachines:[]},i=0;i<n.animationCount();i++){var o=n.animationByIndex(i);r.animations.push(o.name)}for(var a=0;a<n.stateMachineCount();a++){for(var s=n.stateMachineByIndex(a),u=s.name,l=new this.runtime.StateMachineInstance(s,n),c=[],h=0;h<l.inputCount();h++){var d=l.input(h);c.push({name:d.name,type:d.type})}r.stateMachines.push({name:u,inputs:c})}e.artboards.push(r)}return e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(e){this._volume=e,this.artboard&&(this.artboard.volume=e*L.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artboardWidth",{get:function(){var e;return this.artboard?this.artboard.width:null!==(e=this._artboardWidth)&&void 0!==e?e:0},set:function(e){this._artboardWidth=e,this.artboard&&(this.artboard.width=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artboardHeight",{get:function(){var e;return this.artboard?this.artboard.height:null!==(e=this._artboardHeight)&&void 0!==e?e:0},set:function(e){this._artboardHeight=e,this.artboard&&(this.artboard.height=e)},enumerable:!1,configurable:!0}),t.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(t.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(e){this._devicePixelRatioUsed=e},enumerable:!1,configurable:!0}),t.prototype.bindViewModelInstance=function(e){var t;this.artboard&&!this.destroyed&&e&&e.runtimeInstance&&(e.internalIncrementReferenceCount(),null===(t=this._viewModelInstance)||void 0===t||t.cleanup(),this._viewModelInstance=e,this.artboard.bindViewModelInstance(e.runtimeInstance),this.animator.stateMachines.forEach(function(t){return t.bindViewModelInstance(e)}))},Object.defineProperty(t.prototype,"viewModelInstance",{get:function(){return this._viewModelInstance},enumerable:!1,configurable:!0}),t.prototype.viewModelByIndex=function(e){var t=this.file.viewModelByIndex(e);return null!==t?new D(t):null},t.prototype.viewModelByName=function(e){var t=this.file.viewModelByName(e);return null!==t?new D(t):null},t.prototype.enums=function(){if(null===this._dataEnums){var e=this.file.enums();this._dataEnums=e.map(function(e){return new N(e)})}return this._dataEnums},t.prototype.defaultViewModel=function(){if(this.artboard){var e=this.file.defaultArtboardViewModel(this.artboard);if(e)return new D(e)}return null},t.missingErrorMessage="Rive source file or data buffer required",t.cleanupErrorMessage="Attempt to use file after calling cleanup.",t}(),D=function(){function e(e){this._viewModel=e}return Object.defineProperty(e.prototype,"instanceCount",{get:function(){return this._viewModel.instanceCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._viewModel.name},enumerable:!1,configurable:!0}),e.prototype.instanceByIndex=function(e){var t=this._viewModel.instanceByIndex(e);return null!==t?new U(t,null):null},e.prototype.instanceByName=function(e){var t=this._viewModel.instanceByName(e);return null!==t?new U(t,null):null},e.prototype.defaultInstance=function(){var e=this._viewModel.defaultInstance();return null!==e?new U(e,null):null},e.prototype.instance=function(){var e=this._viewModel.instance();return null!==e?new U(e,null):null},Object.defineProperty(e.prototype,"properties",{get:function(){return this._viewModel.getProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceNames",{get:function(){return this._viewModel.getInstanceNames()},enumerable:!1,configurable:!0}),e}(),N=function(){function e(e){this._dataEnum=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._dataEnum.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._dataEnum.values},enumerable:!1,configurable:!0}),e}(),U=function(){function e(e,t){this._propertiesWithCallbacks=[],this._referenceCount=0,this._runtimeInstance=e,this._root=t||this}return Object.defineProperty(e.prototype,"runtimeInstance",{get:function(){return this._runtimeInstance},enumerable:!1,configurable:!0}),e.prototype.handleCallbacks=function(){0!==this._propertiesWithCallbacks.length&&this._propertiesWithCallbacks.forEach(function(e){e.handleCallbacks()})},e.prototype.clearCallbacks=function(){this._propertiesWithCallbacks.forEach(function(e){e.clearCallbacks()})},e.prototype.number=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.number(e);return n?new W(n,this._root):null},e.prototype.string=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.string(e);return n?new H(n,this._root):null},e.prototype.boolean=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.boolean(e);return n?new $(n,this._root):null},e.prototype.color=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.color(e);return n?new G(n,this._root):null},e.prototype.trigger=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.trigger(e);return n?new q(n,this._root):null},e.prototype.enum=function(e){var t,n=null===(t=this._runtimeInstance)||void 0===t?void 0:t.enum(e);return n?new Y(n,this._root):null},e.prototype.viewModel=function(t){var n,r=null===(n=this._runtimeInstance)||void 0===n?void 0:n.viewModel(t);return r?new e(r,this._root):null},e.prototype.replaceViewModel=function(e,t){var n;return null!==t.runtimeInstance&&((null===(n=this._runtimeInstance)||void 0===n?void 0:n.replaceViewModel(e,t.runtimeInstance))||!1)},e.prototype.addToCallbacks=function(e){this._propertiesWithCallbacks.includes(e)||this._propertiesWithCallbacks.push(e)},e.prototype.removeFromCallbacks=function(e){this._propertiesWithCallbacks.includes(e)&&(this._propertiesWithCallbacks=this._propertiesWithCallbacks.filter(function(t){return t!==e}))},e.prototype.incrementReferenceCount=function(){var e;this._referenceCount++,null===(e=this._runtimeInstance)||void 0===e||e.incrementReferenceCount()},e.prototype.decrementReferenceCount=function(){var e;this._referenceCount--,null===(e=this._runtimeInstance)||void 0===e||e.decrementReferenceCount()},Object.defineProperty(e.prototype,"properties",{get:function(){var e;return(null===(e=this._runtimeInstance)||void 0===e?void 0:e.getProperties().map(function(e){return f({},e)}))||[]},enumerable:!1,configurable:!0}),e.prototype.internalIncrementReferenceCount=function(){this._referenceCount++},e.prototype.cleanup=function(){this._referenceCount--,this._referenceCount<=0&&(this._runtimeInstance=null,this.clearCallbacks(),this._propertiesWithCallbacks=[])},e}(),H=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(e){this._viewModelInstanceValue.value=e},enumerable:!1,configurable:!0}),t.prototype.internalHandleCallback=function(e){e(this.value)},t}(V=function(){function e(e,t){this.callbacks=[],this._viewModelInstanceValue=e,this._rootViewModel=t}return e.prototype.on=function(e){0===this.callbacks.length&&this._viewModelInstanceValue.clearChanges(),this.callbacks.includes(e)||(this.callbacks.push(e),this._rootViewModel.addToCallbacks(this))},e.prototype.off=function(e){e?this.callbacks=this.callbacks.filter(function(t){return t!==e}):this.callbacks.length=0,0===this.callbacks.length&&this._rootViewModel.removeFromCallbacks(this)},e.prototype.internalHandleCallback=function(e){},e.prototype.handleCallbacks=function(){var e=this;this._viewModelInstanceValue.hasChanged&&(this._viewModelInstanceValue.clearChanges(),this.callbacks.forEach(function(t){e.internalHandleCallback(t)}))},e.prototype.clearCallbacks=function(){this.callbacks.length=0},Object.defineProperty(e.prototype,"name",{get:function(){return this._viewModelInstanceValue.name},enumerable:!1,configurable:!0}),e}()),W=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(e){this._viewModelInstanceValue.value=e},enumerable:!1,configurable:!0}),t.prototype.internalHandleCallback=function(e){e(this.value)},t}(V),$=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(e){this._viewModelInstanceValue.value=e},enumerable:!1,configurable:!0}),t.prototype.internalHandleCallback=function(e){e(this.value)},t}(V),q=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),t.prototype.trigger=function(){return this._viewModelInstanceValue.trigger()},t.prototype.internalHandleCallback=function(e){e()},t}(V),Y=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(e){this._viewModelInstanceValue.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueIndex",{get:function(){return this._viewModelInstanceValue.valueIndex},set:function(e){this._viewModelInstanceValue.valueIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._viewModelInstanceValue.values},enumerable:!1,configurable:!0}),t.prototype.internalHandleCallback=function(e){e(this.value)},t}(V),G=function(e){function t(t,n){return e.call(this,t,n)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(e){this._viewModelInstanceValue.value=e},enumerable:!1,configurable:!0}),t.prototype.rgb=function(e,t,n){this._viewModelInstanceValue.rgb(e,t,n)},t.prototype.rgba=function(e,t,n,r){this._viewModelInstanceValue.argb(r,e,t,n)},t.prototype.argb=function(e,t,n,r){this._viewModelInstanceValue.argb(e,t,n,r)},t.prototype.alpha=function(e){this._viewModelInstanceValue.alpha(e)},t.prototype.opacity=function(e){this._viewModelInstanceValue.alpha(Math.round(255*Math.max(0,Math.min(1,e))))},t.prototype.internalHandleCallback=function(e){e(this.value)},t}(V),X=function(e){return p(void 0,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,fetch(new Request(e))];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()]}})})},z=function(e){return"string"==typeof e?[e]:e instanceof Array?e:[]},J={EventManager:S,TaskQueueManager:M},K=function(e){return new Promise(function(t){return w.getInstance(function(n){n.decodeAudio(e,t)})})},Q=function(e){return new Promise(function(t){return w.getInstance(function(n){n.decodeImage(e,t)})})},Z=function(e){return new Promise(function(t){return w.getInstance(function(n){n.decodeFont(e,t)})})},er})(),(o=function(){this.init()}).prototype={init:function(){var e=this||a;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var o=t._howls[n]._soundById(r[i]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var o=t._howls[n]._soundById(r[i]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||a,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",i=r.match(/OPR\/(\d+)/g),o=i&&33>parseInt(i[0].split("/")[1],10),s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),u=r.match(/Version\/(.*?) /),l=s&&u&&15>parseInt(u[1],10);return e._codecs={mp3:!!(!o&&(n||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!l&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!l&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||a;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(t){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||a;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||a;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}},a=new o,(s=function(e){if(!e.src||0===e.src.length){console.error("An array of source files must be passed with any new Howl.");return}this.init(e)}).prototype={init:function(e){var t=this;return a.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!!e.xhr&&!!e.xhr.withCredentials&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,void 0!==a.ctx&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e,t,n=null;if(a.noAudio){this._emit("loaderror",null,"No audio support.");return}"string"==typeof this._src&&(this._src=[this._src]);for(var r=0;r<this._src.length;r++){if(this._format&&this._format[r])e=this._format[r];else{if("string"!=typeof(t=this._src[r])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(t))||(e=/\.([^.]+)$/.exec(t.split("?",1)[0])),e&&(e=e[1].toLowerCase())}if(e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),e&&a.codecs(e)){n=this._src[r];break}}if(!n){this._emit("loaderror",null,"No codec support for selected audio sources.");return}return this._src=n,this._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new u(this),this._webAudio&&c(this),this},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;else if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(i++,r=n._sounds[o]._id);1===i?e=null:r=null}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&a._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),h=1e3*c/Math.abs(s._rate),d=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var p=function(){s._paused=!1,s._seek=l,s._start=d,s._stop=f,s._loop=!!(s._loop||n._sprite[e][2])};if(l>=f){n._ended(s);return}var m=s._node;if(n._webAudio){var _=function(){n._playLock=!1,p(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,a.ctx.currentTime),s._playStart=a.ctx.currentTime,void 0===m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,c):s._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,c),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue()},0)};"running"===a.state&&"interrupted"!==a.ctx.state?_():(n._playLock=!0,n.once("resume",_),n._clearTimer(s._id))}else{var g=function(){m.currentTime=l,m.muted=s._muted||n._muted||a._muted||m.muted,m.volume=s._volume*a.volume(),m.playbackRate=s._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,p(),r.then(function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,p(),n._emit("play",s._id)),m.playbackRate=s._rate,m.paused){n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var y=window&&window.ejecta||!m.readyState&&a._navigator.isCocoonJS;if(m.readyState>=3||y)g();else{n._playLock=!0,n._state="loading";var b=function(){n._state="loaded",g(),m.removeEventListener(a._canPlayEvent,b,!1)};m.addEventListener(a._canPlayEvent,b,!1),n._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t)if("boolean"!=typeof e)return n._muted;else n._muted=e;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var o=n._soundById(r[i]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,a.ctx.currentTime):o._node&&(o._node.muted=!!a._muted||e),n._emit("mute",o._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]?r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),void 0===e||!(e>=0)||!(e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var o=0;o<t.length;o++)(n=r._soundById(t[o]))&&(n._volume=e,i[2]||r._stopFade(t[o]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,a.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*a.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var o=i._getSoundIds(r),s=0;s<o.length;s++){var u=i._soundById(o[s]);if(u){if(r||i._stopFade(o[s]),i._webAudio&&!u._muted){var l=a.ctx.currentTime,c=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}i._startFadeInterval(u,e,t,n,o[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,r,i,o){var a=this,s=t,u=n-t,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),h=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var i=(Date.now()-h)/r;h=Date.now(),s+=u*i,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=arguments;if(0===r.length)return this._loop;if(1===r.length)if("boolean"!=typeof r[0])return!!(n=this._soundById(parseInt(r[0],10)))&&n._loop;else e=r[0],this._loop=e;else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=this._getSoundIds(t),o=0;o<i.length;o++)(n=this._soundById(i[o]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,this.playing(i[o])&&(this.pause(i[o],!0),this.play(i[o],!0)))));return this},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length?t=r._sounds[0]._id:1===i.length?r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),"number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var o=0;o<t.length;o++)if(n=r._soundById(t[o])){r.playing(t[o])&&(n._rateSeek=r.seek(t[o]),n._playStart=r._webAudio?a.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,a.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=r.seek(t[o]),u=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);(r._endTimers[t[o]]||!n._paused)&&(r._clearTimer(t[o]),r._endTimers[t[o]]=setTimeout(r._ended.bind(r,n),u)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length?n._sounds.length&&(t=n._sounds[0]._id):1===r.length?n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0])):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(t);if(i)if("number"==typeof e&&e>=0){var o=n.playing(t);o&&n.pause(t,!0),i._seek=e,i._ended=!1,n._clearTimer(t),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var s=function(){o&&n.play(t,!0),n._emit("seek",t)};if(o&&!n._webAudio){var u=function(){n._playLock?setTimeout(u,0):s()};setTimeout(u,0)}else s()}else{if(!n._webAudio)return i._node.currentTime;var l=n.playing(t)?a.ctx.currentTime-i._playStart:0,c=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(c+l*Math.abs(i._rate))}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),a._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=a._howls.indexOf(e);r>=0&&a._howls.splice(r,1);var i=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src||e._src.indexOf(a._howls[n]._src)>=0){i=!1;break}return l&&i&&delete l[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)(!r[i].id||r[i].id===t||"load"===e)&&(setTimeout((function(e){e.call(this,t,n)}).bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!!(e._loop||this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=(e._stop-e._start)*1e3/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),a._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new u(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,a.ctx.currentTime),this},_cleanBuffer:function(e){var t=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(a._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=a._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}},(u=function(e){this._parent=e,this.init()}).prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++a._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=a._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),this._node.gain.setValueAtTime(t,a.ctx.currentTime),this._node.paused=!0,this._node.connect(a.masterGain)):a.noAudio||(this._node=a._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(a._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*a.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++a._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(a._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}},l={},c=function(e){var t=e._src;if(l[t]){e._duration=l[t].duration,f(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);d(r.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){o.setRequestHeader(t,e._xhr.headers[t])}),o.onload=function(){var t=(o.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t){e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".");return}d(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},h(o)}},h=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(l[t._src]=e,f(t,e)):n()};"undefined"!=typeof Promise&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(e).then(r).catch(n):a.ctx.decodeAudioData(e,r,n)},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(a.usingWebAudio){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(e){a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());a._navigator&&!r&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}},"function"==typeof define&&define.amd&&define([],function(){return{Howler:a,Howl:s}}),void 0!==A?(A.HowlerGlobal=o,A.Howler=a,A.Howl=s,A.Sound=u):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=a,window.Howl=s,window.Sound=u),HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e)?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return(t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e)?a:(this._orientation=[e,t,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=(m=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],m.call(this,e)}),Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t)if("number"!=typeof e)return n._stereo;else n._stereo=e,n._pos=[e,0,0];for(var i=n._getSoundIds(t),o=0;o<i.length;o++){var a=n._soundById(i[o]);if(a)if("number"!=typeof e)return a._stereo;else a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||y(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}return n},Howl.prototype.pos=function(e,t,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,t,n,r)}}),i;if(t="number"!=typeof t?0:t,n="number"!=typeof n?-.5:n,void 0===r)if("number"!=typeof e)return i._pos;else i._pos=[e,t,n];for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s)if("number"!=typeof e)return s._pos;else s._pos=[e,t,n],s._node&&((!s._panner||s._panner.pan)&&y(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setPosition(e,t,n)),i._emit("pos",s._id)}return i},Howl.prototype.orientation=function(e,t,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,t,n,r)}}),i;if(t="number"!=typeof t?i._orientation[1]:t,n="number"!=typeof n?i._orientation[2]:n,void 0===r)if("number"!=typeof e)return i._orientation;else i._orientation=[e,t,n];for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s)if("number"!=typeof e)return s._orientation;else s._orientation=[e,t,n],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),y(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setOrientation(e,t,n)),i._emit("orientation",s._id)}return i},Howl.prototype.pannerAttr=function(){var e,t,n,r=arguments;if(!this._webAudio)return this;if(0===r.length)return this._pannerAttr;if(1===r.length)if("object"!=typeof r[0])return(n=this._soundById(parseInt(r[0],10)))?n._pannerAttr:this._pannerAttr;else e=r[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:this._panningModel});else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=this._getSoundIds(t),o=0;o<i.length;o++)if(n=this._soundById(i[o])){var a=n._pannerAttr;a={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:a.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:a.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:a.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:a.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:a.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:a.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:a.panningModel};var s=n._panner;s||(n._pos||(n._pos=this._pos||[0,0,-.5]),y(n,"spatial"),s=n._panner),s.coneInnerAngle=a.coneInnerAngle,s.coneOuterAngle=a.coneOuterAngle,s.coneOuterGain=a.coneOuterGain,s.distanceModel=a.distanceModel,s.maxDistance=a.maxDistance,s.refDistance=a.refDistance,s.rolloffFactor=a.rolloffFactor,s.panningModel=a.panningModel}return this},Sound.prototype.init=(_=Sound.prototype.init,function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,_.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}),Sound.prototype.reset=(g=Sound.prototype.reset,function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),g.call(this)}),y=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)};const J=Object.create(null);J.open="0",J.close="1",J.ping="2",J.pong="3",J.message="4",J.upgrade="5",J.noop="6";const K=Object.create(null);Object.keys(J).forEach(e=>{K[J[e]]=e});const Q={type:"error",data:"parser error"},Z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ee="function"==typeof ArrayBuffer,et=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,en=({type:e,data:t},n,r)=>{if(Z&&t instanceof Blob)if(n)return r(t);else return er(t,r);if(ee&&(t instanceof ArrayBuffer||et(t)))if(n)return r(t);else return er(new Blob([t]),r);return r(J[e]+(t||""))},er=(e,t)=>{let n=new FileReader;return n.onload=function(){t("b"+(n.result.split(",")[1]||""))},n.readAsDataURL(e)};function ei(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}const eo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ea="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<eo.length;e++)ea[eo.charCodeAt(e)]=e;const es=e=>{let t=.75*e.length,n=e.length,r,i=0,o,a,s,u;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let l=new ArrayBuffer(t),c=new Uint8Array(l);for(r=0;r<n;r+=4)o=ea[e.charCodeAt(r)],a=ea[e.charCodeAt(r+1)],s=ea[e.charCodeAt(r+2)],u=ea[e.charCodeAt(r+3)],c[i++]=o<<2|a>>4,c[i++]=(15&a)<<4|s>>2,c[i++]=(3&s)<<6|63&u;return l},eu="function"==typeof ArrayBuffer,el=(e,t)=>{if("string"!=typeof e)return{type:"message",data:eh(e,t)};let n=e.charAt(0);return"b"===n?{type:"message",data:ec(e.substring(1),t)}:K[n]?e.length>1?{type:K[n],data:e.substring(1)}:{type:K[n]}:Q},ec=(e,t)=>eu?eh(es(e),t):{base64:!0,data:e},eh=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ed=(e,t)=>{let n=e.length,r=Array(n),i=0;e.forEach((e,o)=>{en(e,!1,e=>{r[o]=e,++i===n&&t(r.join("\x1e"))})})},ef=(e,t)=>{let n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){let i=el(n[e],t);if(r.push(i),"error"===i.type)break}return r};function ep(e){return e.reduce((e,t)=>e+t.length,0)}function em(e,t){if(e[0].length===t)return e.shift();let n=new Uint8Array(t),r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function e_(e){if(e){var t=e;for(var n in e_.prototype)t[n]=e_.prototype[n];return t}}e_.prototype.on=e_.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},e_.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},e_.prototype.off=e_.prototype.removeListener=e_.prototype.removeAllListeners=e_.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},e_.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},e_.prototype.emitReserved=e_.prototype.emit,e_.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},e_.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ev="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),eg="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ey(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const eb=eg.setTimeout,ew=eg.clearTimeout;function eA(e,t){t.useNativeTimers?(e.setTimeoutFn=eb.bind(eg),e.clearTimeoutFn=ew.bind(eg)):(e.setTimeoutFn=eg.setTimeout.bind(eg),e.clearTimeoutFn=eg.clearTimeout.bind(eg))}function eT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class eE extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class eC extends e_{constructor(e){super(),this.writable=!1,eA(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new eE(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=el(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class ex extends eC{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){ef(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,ed(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eT()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let ek=!1;try{ek="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const eR=ek;function eS(){}class eM extends ex{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){let n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class eP extends e_{constructor(e,t,n){super(),this.createRequest=e,eA(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;let t=ey(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},n.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=eP.requestsCount++,eP.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=eS,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete eP.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function eL(){for(let e in eP.requests)eP.requests.hasOwnProperty(e)&&eP.requests[e].abort()}eP.requestsCount=0,eP.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",eL):"function"==typeof addEventListener&&addEventListener("onpagehide"in eg?"pagehide":"unload",eL,!1));const eI=function(){let e=eO({xdomain:!1});return e&&null!==e.responseType}();function eO(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||eR))return new XMLHttpRequest}catch(e){}if(!t)try{return new eg[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}const eF="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class eB extends eC{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,n=eF?{}:ey(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;en(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(e){}r&&ev(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eT()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ej=eg.WebSocket||eg.MozWebSocket,eD={websocket:class extends eB{createSocket(e,t,n){return eF?new ej(e,t,n):t?new ej(e,t):new ej(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends eC{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{let r=function(e,n){t||(t=new TextDecoder);let r=[],i=0,o=-1,a=!1;return new TransformStream({transform(s,u){for(r.push(s);;){if(0===i){if(1>ep(r))break;let e=em(r,1);a=(128&e[0])==128,i=(o=127&e[0])<126?3:126===o?1:2}else if(1===i){if(2>ep(r))break;let e=em(r,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(8>ep(r))break;let e=em(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){u.enqueue(Q);break}o=0x100000000*n+t.getUint32(4),i=3}else{if(ep(r)<o)break;let e=em(r,o);u.enqueue(el(a?e:t.decode(e),n)),i=0}if(0===o||o>e){u.enqueue(Q);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=n.readable.pipeThrough(r).getReader(),o=new TransformStream({transform(t,n){var r;r=e=>{let r,i=e.length;if(i<126)new DataView((r=new Uint8Array(1)).buffer).setUint8(0,i);else if(i<65536){let e=new DataView((r=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,i)}else{let e=new DataView((r=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}t.data&&"string"!=typeof t.data&&(r[0]|=128),n.enqueue(r),n.enqueue(e)},Z&&t.data instanceof Blob?t.data.arrayBuffer().then(ei).then(r):ee&&(t.data instanceof ArrayBuffer||et(t.data))?r(ei(t.data)):en(t,!1,t=>{e||(e=new TextEncoder),r(e.encode(t))})}});o.readable.pipeTo(n.writable),this._writer=o.writable.getWriter();let a=()=>{i.read().then(({done:e,value:t})=>{e||(this.onPacket(t),a())}).catch(e=>{})};a();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&ev(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends eM{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=eI&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new eP(eO,this.uri(),e)}}},eN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,eU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function eV(e){if(e.length>8e3)throw"URI too long";let t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=eN.exec(e||""),o={},a=14;for(;a--;)o[eU[a]]=i[a]||"";return -1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){let n=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,o.path),o.queryKey=function(e,t){let n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,o.query),o}const eH="function"==typeof addEventListener&&"function"==typeof removeEventListener,eW=[];eH&&addEventListener("offline",()=>{eW.forEach(e=>e())},!1);class e$ extends e_{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let n=eV(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=eV(t.host).host);eA(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),eH&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},eW.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&e$.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",e$.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let n=this.writeBuffer[t].data;if(n)e+="string"==typeof n?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(n):Math.ceil(1.33*(n.byteLength||n.size));if(t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ev(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;let i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(e$.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),eH&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=eW.indexOf(this._offlineEventListener);-1!==e&&eW.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}e$.protocol=4;class eq extends e${constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;e$.priorWebsocketSuccess=!1;let r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;e$.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){n||(n=!0,l(),t.close(),t=null)}let o=e=>{let n=Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function a(){o("transport closed")}function s(){o("socket closed")}function u(e){t&&e.name!==t.name&&i()}let l=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",a),this.off("close",s),this.off("upgrading",u)};t.once("open",r),t.once("error",o),t.once("close",a),this.once("close",s),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class eY extends eq{constructor(e,t={}){let n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>eD[e]).filter(e=>!!e)),super(e,n)}}eY.protocol;var eG={};T(eG,"protocol",()=>e1),T(eG,"PacketType",()=>w),T(eG,"Encoder",()=>e2),T(eG,"Decoder",()=>e3);const eX="function"==typeof ArrayBuffer,ez=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,eJ=Object.prototype.toString,eK="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===eJ.call(Blob),eQ="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===eJ.call(File);function eZ(e){return eX&&(e instanceof ArrayBuffer||ez(e))||eK&&e instanceof Blob||eQ&&e instanceof File}const e0=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],e1=5;(b=w||(w={}))[b.CONNECT=0]="CONNECT",b[b.DISCONNECT=1]="DISCONNECT",b[b.EVENT=2]="EVENT",b[b.ACK=3]="ACK",b[b.CONNECT_ERROR=4]="CONNECT_ERROR",b[b.BINARY_EVENT=5]="BINARY_EVENT",b[b.BINARY_ACK=6]="BINARY_ACK";class e2{constructor(e){this.replacer=e}encode(e){return(e.type===w.EVENT||e.type===w.ACK)&&function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(eZ(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===w.EVENT?w.BINARY_EVENT:w.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===w.BINARY_EVENT||e.type===w.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],n=e.data;return e.data=function e(t,n){if(!t)return t;if(eZ(t)){let e={_placeholder:!0,num:n.length};return n.push(t),e}if(Array.isArray(t)){let r=Array(t.length);for(let i=0;i<t.length;i++)r[i]=e(t[i],n);return r}if("object"==typeof t&&!(t instanceof Date)){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e(t[i],n));return r}return t}(n,t),e.attachments=t.length,{packet:e,buffers:t}}(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function e4(e){return"[object Object]"===Object.prototype.toString.call(e)}class e3 extends e_{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let n=(t=this.decodeString(e)).type===w.BINARY_EVENT;n||t.type===w.BINARY_ACK?(t.type=n?w.EVENT:w.ACK,this.reconstructor=new e5(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(eZ(e)||e.base64)if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+e)}decodeString(e){let t=0,n={type:Number(e.charAt(0))};if(void 0===w[n.type])throw Error("unknown packet type "+n.type);if(n.type===w.BINARY_EVENT||n.type===w.BINARY_ACK){let r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){let r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";let r=e.charAt(t+1);if(""!==r&&Number(r)==r){let r=t+1;for(;++t;){let n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){let r=this.tryParse(e.substr(t));if(e3.isPayloadValid(n.type,r))n.data=r;else throw Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case w.CONNECT:return e4(t);case w.DISCONNECT:return void 0===t;case w.CONNECT_ERROR:return"string"==typeof t||e4(t);case w.EVENT:case w.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===e0.indexOf(t[0]));case w.ACK:case w.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class e5{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,n;let e=(t=this.reconPack,n=this.buffers,t.data=function e(t,n){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<n.length)return n[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=e(t[r],n));return t}(t.data,n),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function e6(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const e8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e9 extends e_{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[e6(e,"open",this.onopen.bind(this)),e6(e,"packet",this.onpacket.bind(this)),e6(e,"error",this.onerror.bind(this)),e6(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(e8.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let o={type:w.EVENT,data:t};if(o.options={},o.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,n=t.pop();this._registerAckCallback(e,n),o.id=e}let a=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,s=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!a||(s?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;let r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r){this.acks[e]=t;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},r),o=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,r)=>{let i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:w.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case w.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case w.EVENT:case w.BINARY_EVENT:this.onevent(e);break;case w.ACK:case w.BINARY_ACK:this.onack(e);break;case w.DISCONNECT:this.ondisconnect();break;case w.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,n=!1;return function(...r){n||(n=!0,t.packet({type:w.ACK,id:e,data:r}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:w.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n]){t.splice(n,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n]){t.splice(n,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function e7(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e7.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-n:e+n}return 0|Math.min(e,this.max)},e7.prototype.reset=function(){this.attempts=0},e7.prototype.setMin=function(e){this.ms=e},e7.prototype.setMax=function(e){this.max=e},e7.prototype.setJitter=function(e){this.jitter=e};class te extends e_{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,eA(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new e7({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let r=t.parser||eG;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new eY(this.uri,this.opts);let t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let r=e6(t,"open",function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=e6(t,"error",i);if(!1!==this._timeout){let e=this._timeout,n=this.setTimeoutFn(()=>{r(),i(Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(e6(e,"ping",this.onping.bind(this)),e6(e,"data",this.ondata.bind(this)),e6(e,"error",this.onerror.bind(this)),e6(e,"close",this.onclose.bind(this)),e6(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){ev(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new e9(this,e,t),this.nsps[e]=n),n}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const tt={};function tn(e,t){let n;"object"==typeof e&&(t=e,e=void 0);let r=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=eV(e)),!r.port&&(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,a=r.path,s=tt[o]&&a in tt[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new te(i,t):(tt[o]||(tt[o]=new te(i,t)),n=tt[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(tn,{Manager:te,Socket:e9,io:tn,connect:tn}),console.log("connected"),console.log("v 0.05");const{a:tr,div:ti,li:to,p:ta,ul:ts,img:tu}=X.tags;var tl={},tc=new s({src:[new URL(tl=import.meta.resolve("6B3bk"))],volume:.5,html5:!0}),th={},td=new s({src:[new URL(th=import.meta.resolve("dExOG"))],volume:.5,html5:!0}),tf={},tp=new s({src:[new URL(tf=import.meta.resolve("7JU8s"))],volume:.5,html5:!0}),tm={},t_=new s({src:[new URL(tm=import.meta.resolve("7e5Rv"))],volume:.5,html5:!0}),tv={},tg=new s({src:[new URL(tv=import.meta.resolve("jbsdf"))],volume:.5,html5:!0}),ty={},tb=new s({src:[new URL(ty=import.meta.resolve("3ODJD"))],volume:.5,html5:!0}),tw={},tA=new s({src:[new URL(tw=import.meta.resolve("clCAI"))],volume:.5,html5:!0}),tT={},tE=new s({src:[new URL(tT=import.meta.resolve("39Jkv"))],volume:.5,html5:!0}),tC={},tx=new s({src:[new URL(tC=import.meta.resolve("6fFne"))],volume:.5,html5:!0}),tk={},tR=new s({src:[new URL(tk=import.meta.resolve("5jKwa"))],html5:!0}),tS={},tM=new s({src:[new URL(tS=import.meta.resolve("Jj2Gd"))],html5:!0}),tP={},tL=new s({src:[new URL(tP=import.meta.resolve("im45V"))],volume:.5,html5:!0}),tI={},tO=new s({src:[new URL(tI=import.meta.resolve("jmdIT"))],volume:.5,html5:!0}),tF={},tB=new s({src:[new URL(tF=import.meta.resolve("apW9k"))],volume:.5,html5:!0}),tj=new s({src:[new URL(tF)],volume:.1,html5:!0}),tD={},tN=new s({src:[new URL(tD=import.meta.resolve("3Dmr0"))],volume:.5,html5:!0}),tU=new s({src:[new URL(tD)],volume:.4,html5:!0}),tV={},tH=new s({src:[new URL(tV=import.meta.resolve("8txID"))],volume:.14,html5:!0}),tW=[tc,td,tp],t$=[t_,tg,tb,tA,tE,tx];const tq=tn("https://hitcore.app"),tY=document.createElement("canvas");tY.width=130,tY.height=320,document.body.appendChild(tY);let tG="user",tX="",tz="",tJ=100,tK=0,tQ=0,tZ="Z1X0",t0=!1;setTimeout(()=>{let e=document.getElementById("iframeBG"),t=(e.contentDocument||e.contentWindow.document).getElementsByClassName("spline-watermark");console.log(t[0]),t.remove()},1e3);const t1=Qs.parse(location.search,{ignoreQueryPrefix:!0});void 0!=t1.username&&(tG=t1.username,tZ=tX=t1.roomId,tJ=parseInt(t1.initialHealth,10),tz=" "),tq.emit("joinRoom",{username:tG,room:tX});var t2={};t2=import.meta.resolve("lgjmC");const t4=new z.Rive({src:new URL(t2),canvas:tY,autoplay:!0,artboard:"Main",stateMachines:"Main_StateMachine",onLoad:()=>{t4.resizeDrawingSurfaceToCanvas();let e=t4.stateMachineInputs("Main_StateMachine");t5("HP","0"),t5("RoomID","ROOM "+tZ),t5("TargetName","TARGET: "+tz),r=e.find(e=>"Hit"===e.name),i=e.find(e=>"DmgIndicator"===e.name),function e(t){var n;let r=Math.floor(17*Math.random())+(n=1),i=Math.floor(2*Math.random());t6(t,i=1==i,Math.floor(2*Math.random())),setTimeout(()=>{e(r)},300)}(1),console.log("found all triggers"),tR.play()}});function t3(){t4.resizeDrawingSurfaceToCanvas()}function t5(e,t){t4.setTextRunValue(e,t)}function t6(e,t,n){(0==n||3==n)&&t4.setBooleanStateAtPath("On",t,`FireBoard/Matrix1/TargetingButton${e}`),(1==n||3==n)&&t4.setBooleanStateAtPath("On",t,`FireBoard/Matrix2/TargetingButton${e}`)}function t8(){tQ=0,console.log("cleared"),i.value=!1}function t9(e){let t=Math.floor(Math.random()*e.length);e[t].rate=1.4*Math.random(),e[t].play()}window.addEventListener("resize",t3),t3(),t4.on(z.EventType.RiveEvent,function(e){let t=e.data;console.log("Recieved Rive Event!: ",t.name),"FireEvent"==t.name?(t0=!t0,function(){let e=[[9,14],[4,8,13,18],[3,7,12,17],[2,6,11,16],[1,5,10,15]];for(var t=0;t<e.length;t++)e[t].forEach(e=>{setTimeout(()=>{t6(e,!0,3)},(t+1)*10),setTimeout(()=>{t6(e,!1,3)},(t+1)*(220-10*t))})}(),clearTimeout(n),n=setTimeout(t8,3e3),tQ+=1,t5("DamageCount",`+[${tQ}]`),i.value=!0,t9(tW),tq.emit("fireLaser",{username:tG,room:tX,damage:1})):"hpOn"==t.name?function e(){tK<tJ&&(t5("HP",(tK+=1).toString()),setTimeout(()=>{e()},10))}():"ShieldUpEvent"==t.name?(t5("HP",(tJ+=1).toString()),tL.play(),console.log("shield Up!"+tJ)):"ShieldDownEvent"==t.name?(tJ-=1,console.log("shield Down!"),t5("HP",tJ.toString()),tO.play()):"ReticleHoverOn"==t.name?(console.log("reticleHover"),tN.play()):"ReticleHoverOff"==t.name?tU.play():"ShieldHoverOn"==t.name?tB.play():"ShieldHoverOff"==t.name?tj.play():"hpHover"==t.name&&tH.play()}),tq.on("receiveLaser",e=>{console.log("Received laser data: ",e.damage),setTimeout(()=>{var t;return t=e.damage,void(tJ-=t,r.fire(),t9(t$),t5("HP",tJ.toString()),console.log("hp is now: ",tJ))},700)}),tq.on("userJoined",e=>{console.log(`user joined room. welcome , ${e.username}`),tz=e.username,t5("TargetName","TARGET "+e.username),tM.play()}),tq.on("roomData",e=>{console.log("recieved room data"),tz=e.player1});
//# sourceMappingURL=game.77270c48.js.map
