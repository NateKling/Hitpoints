<!DOCTYPE html>
<html>
<head>
  <title>Hitpoints</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Exo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: black;
      color: #00ffcc;
      font-family: 'Exo 2', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center; /* Center content vertically */
      align-items: center;
      height: 100vh;
      margin: 0;
      /* Add the gradient to the body */
      background-image: linear-gradient(to bottom, transparent, #E848AD20),
                      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10'%3E%3Cpath fill='%230077cc' fill-opacity='0.2' d='M0 0h1v1H0V0zm9 0h1v1H9V0zm0 9h1v1H9V9zM0 9h1v1H0V9z'%3E%3C/path%3E%3C/svg%3E");
      background-size: 100%, auto;
      background-position: 0% 100%, 0 0;
      background-repeat: no-repeat, repeat;
      transition: background-position 0.5s ease,
                  background-image 2s ease, /* Changed to 2 seconds */
                  background-color 2s ease;     /* Changed to 2 seconds */
      /* Add glow effect */
      box-shadow: 0 0 10px rgba(0, 119, 204, 0.5); /* Blue glow, adjust as needed */
    }

    body:hover {
      background-position: 0% 0%, 0 0;
    }

    .container {
      border: 2px solid #00ffcc;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffcc;
      background-color: rgba(0, 0, 0, 0.7);
      text-align: center;
      box-shadow: 0 -5px 30px rgba(0, 255, 204, 0.8);
      animation: pulseGlow 2s infinite alternate;
      margin-top: 0; /* Reset margin-top so h1 and container are centered together */
      opacity: 0; /* Start with 0 opacity for fade-in */
      animation: fadeIn 1.5s forwards 0.5s; /* Apply fade-in with delay */
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    @keyframes pulseGlow {
      from {
        box-shadow: 0 -5px 30px rgba(0, 255, 204, 0.8);
      }
      to {
        box-shadow: 0 -5px 30px rgba(0, 255, 204, 0.4);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    h1 {
      color: #ff9900;
      text-shadow: 0 0 5px #ff9900;
      margin-bottom: 30px;
      font-family: 'Orbitron', sans-serif;
      display: flex; /* Use flexbox to align items horizontally */
      align-items: center; /* Vertically center items */
      gap: 10px; /* Add some gap between the text and the SVG */
      margin-top: 0; /* Reset margin-top so h1 and container are centered together */
      opacity: 0; /* Start with 0 opacity for fade-in */
      animation: fadeIn 1s forwards; /* Apply fade-in animation */
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    .form-group {
      margin-bottom: 15px;
      text-align: left;
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 0; /* Start with 0 opacity for fade-in */
      animation: fadeIn 1.5s forwards 0.8s; /* Staggered fade-in */
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    label {
      display: block;
      margin-bottom: 8px;
    }

    input[type="text"] {
      width: 150px;
      padding: 10px;
      background-color: #222;
      border: 1px solid #00ffcc;
      border-radius: 5px;
      color: #66ffdd; /* Lighter text color */
      font-family: 'Exo 2', sans-serif;
      text-align: center; /* Center the text */
    }

    /* Hide the default arrows */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;  /* Firefox */
      appearance: textfield;
      width: 100px; /* Increased width to accommodate centered text better */
      padding: 10px;
      background-color: #222;
      border: 1px solid #00ffcc;
      border-radius: 5px;
      color: #00ffcc;
      font-family: 'Exo 2', sans-serif;
      font-size: 1.4em; /* Increased font size */
      text-align: center;
    }

    .number-input-wrapper {
      display: flex;
      align-items: center;
      justify-content: center; /* Center the input field */
      width: 250px; /* Ensure the wrapper has a fixed width */
    }

    .number-input-buttons {
      display: flex;
      margin-top: 10px;
      width: 80px; /* width of buttons container */
      justify-content: space-between; /* space between the buttons */
    }


    .number-input-buttons button {
      padding: 0;
      width: 30px; /* Give the buttons a fixed width */
      height: 30px;
      background-color: transparent; /* Make the background transparent */
      color: #00ffcc;
      border: none;
      cursor: pointer;
      font-family: 'Exo 2', sans-serif;
      font-weight: 600;
      transition:  box-shadow 0.3s ease, border-color 0.3s ease;
      display: flex; /* Use flexbox for centering icons */
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 5px #0077cc; /* Thin blue glow */
      border: 1px solid #0077cc;  /* Add a border */
      border-radius: 0 0 5px 0; /* Make both buttons have bottom-right radius*/
    }

    .number-input-buttons button:hover {
      background-color: transparent; /* Keep background transparent on hover */
      box-shadow: 0 0 10px #00aaff; /* Increase glow on hover*/
      border-color: #00aaff;
    }

    .number-input-buttons button:first-child {
      border-radius: 0 5px 0 0;
      border-bottom-left-radius: 5px; /* Added for consistency */
    }
    .number-input-buttons button:last-child {
      border-radius: 0 0 5px 0;
    }


    button {
      padding: 12px 20px;
      background-color: #ff6600;
      color: black;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 10px #ff6600;
      transition: box-shadow 0.3s ease, background-color 2s ease; /* Changed to 2 seconds */
      font-family: 'Exo 2', sans-serif;
      font-weight: 600;
      border-top-left-radius: 20px;
      border-top-right-radius: 5px;
      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 20px; /* Added margin-top to create space */
      opacity: 0; /* Start with 0 opacity for fade-in */
      animation: fadeIn 1.5s forwards 1s; /* Staggered fade-in */
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    button:hover {
      background-color: #ff8800;
      box-shadow: 0 0 15px #ff8800;
    }

    .join-group {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 15px;
      opacity: 0; /* Start with 0 opacity for fade-in */
      animation: fadeIn 1.5s forwards 1.2s; /* Staggered fade-in */
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    .join-group button {
      margin-left: 10px;
      font-family: 'Exo 2', sans-serif;
      width: 80px; /* Reduced width to fit 4 characters */
      opacity: 0.5; /* Start with disabled look */
      cursor: not-allowed;
      transition: opacity 0.3s ease, box-shadow 0.3s ease, color 0.3s ease; /* Smooth transition */
      background-color: #333; /* Darker background */
      color: #888; /* Darker text */
    }

    .join-group button.active {
      opacity: 1; /* Make active */
      cursor: pointer;
      box-shadow: 0 0 10px #ff6600; /* Add glow */
      background-color: #ff6600;
      color: black;
    }

    .join-group button.active:hover {
      box-shadow: 0 0 15px #ff8800; /* Increase glow on hover */
      background-color: #ff8800;
    }

    .join-group input[type="text"] {
      margin-left: 10px;
      font-family: 'Exo 2', sans-serif;
      width: 80px; /* Reduced width to fit 4 characters */
    }

    .title-above {
        display: flex; /* Use flexbox to align items horizontally */
        align-items: center; /* Vertically center items */
        gap: 10px; /* Add some gap between the text and the SVG */
        color: #ff9900;
        text-shadow: 0 0 5px #ff9900;
        margin-bottom: 30px;
        font-family: 'Orbitron', sans-serif;
        justify-content: center;
        margin-top: 0; /* Reset margin-top so h1 and container are centered together */
        opacity: 0; /* Start with 0 opacity for fade-in */
        animation: fadeIn 1s forwards; /* Apply fade-in animation */
        transform: translateY(0); /* Initial position */
        transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

    .below-box-text {
      color: white;
      font-family: 'Exo 2', sans-serif;
      margin-top: 20px;
      opacity: 0;
      animation: fadeIn 1.5s forwards 1.4s;
      transform: translateY(0); /* Initial position */
      transition: transform 0.5s ease-in-out; /* Add smooth transition */
    }

  </style>
</head>
<body>

  <h1 class="title-above">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-crosshair-2"><circle cx="12" cy="12" r="10"/><path d="M22 12h-4"/><path d="M6 12H2"/><path d="M12 6V2"/><path d="M12 22v-4"/><path d="M12 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>
    Hitpoints
  </h1>
  <div class="container">


    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" value="player">
    </div>

    <div class="form-group">
      <label for="initialHealth">Initial Hitpoints:</label>
      <div class="number-input-wrapper">
        <input type="number" id="initialHealth" value="50" min="0">
      </div>
    </div>

    <button id="startGameButton">Start Game</button>

    <div class="join-group">
      <button id="joinGameButton">Join Game</button>
      <input type="text" id="roomId" placeholder="Room ID" required>
    </div>

  </div>
  <p class="below-box-text">Tabletop Companion App</p>

  <script>
    let clickedStartGame =false;
    document.getElementById('startGameButton').addEventListener('click', function() {
      const username = document.getElementById('username').value;
      const initialHealth = document.getElementById('initialHealth').value;

      console.log(`Starting game with username: ${username}, initial health: ${initialHealth}`);
      // Add class to trigger animation
      document.querySelector('.container').style.transform = 'translateY(-100vh)';
      document.querySelector('h1').style.transform = 'translateY(-100vh)';
      document.querySelectorAll('.form-group').forEach(element => {
        element.style.transform = 'translateY(-100vh)';
      });
      document.querySelector('button').style.transform = 'translateY(-100vh)';
      document.querySelector('.join-group').style.transform = 'translateY(-100vh)';
      document.querySelector('.below-box-text').style.transform = 'translateY(-100vh)';

      // Change background to black and fade out image.
      document.body.style.backgroundImage = 'linear-gradient(to bottom, black, black), none';
      document.body.style.backgroundColor = 'black';
      // Call BeginGame function after animation completes
      clickedStartGame = true;
      setTimeout(BeginGame, 1400); // Changed to 2000 for 2 seconds
    });

    document.getElementById('joinGameButton').addEventListener('click', function() {
      if (joinGameButton.classList.contains('active')) {
        const username = document.getElementById('username').value;
        const initialHealth = document.getElementById('initialHealth').value;
        const roomId = document.getElementById('roomId').value;
        console.log(`Joining room ${roomId} as ${username}`);
         // Add class to trigger animation
        document.querySelector('.container').style.transform = 'translateY(-100vh)';
        document.querySelector('h1').style.transform = 'translateY(-100vh)';
        document.querySelectorAll('.form-group').forEach(element => {
          element.style.transform = 'translateY(-100vh)';
        });
        document.querySelector('button').style.transform = 'translateY(-100vh)';
        document.querySelector('.join-group').style.transform = 'translateY(-100vh)';
        document.querySelector('.below-box-text').style.transform = 'translateY(-100vh)';
        // Change background to black and fade out image
        document.body.style.backgroundImage = 'linear-gradient(to bottom, black, black), none';
        document.body.style.backgroundColor = 'black';
        // Call BeginGame function after animation completes
        setTimeout(BeginGame, 1400); // Changed to 2000 for 2 seconds
      }
    });

    const joinGameButton = document.getElementById('joinGameButton');
    const roomIdInput = document.getElementById('roomId');
    const usernameInput = document.getElementById('username');

    // Function to check room ID length
    function checkRoomIdLength() {
      if (roomIdInput.value.length >= 4) {
        joinGameButton.classList.add('active'); // Add the active class
        joinGameButton.disabled = false; // Enable the button
      } else {
        joinGameButton.classList.remove('active'); // Remove the active class
        joinGameButton.disabled = true; // Disable the button
      }
    }

    // Event listener for room ID input
    roomIdInput.addEventListener('input', checkRoomIdLength);

    // Initial check in case there's a value in the input on page load
    checkRoomIdLength();

    // Clear default username on focus
    usernameInput.addEventListener('focus', function() {
      if (this.value === 'player') {
        this.value = '';
      }
    });



    // Get the input and buttons
    const healthInput = document.getElementById('initialHealth');

    function BeginGame() {
      console.log("BeginGame function called!");
      const username = document.getElementById('username').value;
      const initialHealth = document.getElementById('initialHealth').value;
      let roomId = document.getElementById('roomId').value;

      if (roomId == '' || clickedStartGame){  //generate random string for a new game
        roomId = generateRandomString(4);
      }

      // Construct the URL with parameters
      const url = `game.html?username=${encodeURIComponent(username)}&initialHealth=${encodeURIComponent(initialHealth)}&roomId=${encodeURIComponent(roomId)}`;

      // Redirect to the game.html page
      window.location.href = url;
    }


    function generateRandomString(length) {
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    const charactersLength = characters.length;
    for (let i = 0; i < length; i++) {
      result += characters.charAt(Math.floor(Math.random() * charactersLength));
    }
    return result;
  }
  
  

  </script>
</body>
</html>
